(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t,n){e.exports={centered:"styles_centered__3iYAP"}},187:function(e,t,n){e.exports={hero_heading:"styles_hero_heading__1Twp7"}},192:function(e,t,n){e.exports={videobox:"RwdYoutube_videobox__Z9csr"}},206:function(e,t,n){e.exports=n(251)},212:function(e,t,n){},214:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(68),c=n.n(o),i=(n(212),n(7)),l=n(28),u=n(18),s=(n(213),n(214),n(64));s.a.apps.length||s.a.initializeApp({apiKey:"AIzaSyAUlqVFqNfKTY34UCA0_jt9kHlTqMgDzi0",authDomain:"ar-classroom-1bb48.firebaseapp.com",projectId:"ar-classroom-1bb48",storageBucket:"ar-classroom-1bb48.appspot.com",messagingSenderId:"801778279327",appId:"1:801778279327:web:e63f67b115057a5e2c53aa",measurementId:"G-DEC44C4SPG"});var f=s.a,h=n(265),m=n(266),d=n(267),p=n(268),v=n(269),g=n(2),y=n(3),E=n(9),b=n(10),w=(n(253),n(215),{apiKey:"AIzaSyAUlqVFqNfKTY34UCA0_jt9kHlTqMgDzi0",authDomain:"ar-classroom-1bb48.firebaseapp.com",projectId:"ar-classroom-1bb48",storageBucket:"ar-classroom-1bb48.appspot.com",messagingSenderId:"801778279327",appId:"1:801778279327:web:e63f67b115057a5e2c53aa",measurementId:"G-DEC44C4SPG"}),j=Object(y.a)(function e(t){Object(g.a)(this,e),void 0!==s.a.apps&&(s.a.apps.length||s.a.initializeApp(w)),this.firestore=s.a.firestore(),this.auth=s.a.auth()}),O=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.firestore.collection("games").doc(t.gameId).collection("players").doc(e).get().then(this._convertDocToPlayer)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.firestore;if("gameId"in e){var n=e.gameId;delete e.gameId,t=t.collection("games").doc(n).collection("players")}return t.add(e).then(function(e){return e.get()}).then(this._convertDocToPlayer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=this.firestore;return"gameId"in t&&(r=r.collection("games").doc(t.gameId)),r=r.collection("players"),"limit"in t&&(r=r.limit(t.limit)),void 0!==n?r.onSnapshot(function(t){var r=[];t.forEach(function(t){return r.push(e._convertDocToPlayer(t))}),n(r)}):r.get().then(function(t){return t.docs.map(function(t){return e._convertDocToQuestion(t)})})}},{key:"_convertDocToPlayer",value:function(e){return Object.assign({id:e.id},e.data())}}]),n}(j),x=function(e){return(new O).create(e)},k=n(264),_=n(185),L=n.n(_),S=function(e){return a.a.createElement(k.a,{className:L.a.centered,style:{maxWidth:e.maxWidth||null,height:e.verticalCentered?"100%":null}},e.children)},C=function(){function e(){Object(g.a)(this,e)}return Object(y.a)(e,null,[{key:"STATE_DRAFT",get:function(){return"draft"}},{key:"STATE_WAITING_FOR_PLAYERS",get:function(){return"waitingForPlayers"}}]),e}(),N=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.firestore.collection("games").add(Object.assign({state:C.STATE_DRAFT},e)).then(function(e){return e.get()}).then(this._convertDocToGame)}},{key:"get",value:function(e,t){var n=this,r=this._getGameDoc(e);return void 0!==t?r.onSnapshot(function(e){return t(n._convertDocToGame(e))}):r.get().then(this._convertDocToGame)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore.collection("games");return"ownerId"in t&&(n=n.where("ownerId","==",t.ownerId)),"state"in t&&(n=n.where("state","==",t.state)),"shortCode"in t&&(n=n.where("shortCode","==",t.shortCode)),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToGame(t)})})}},{key:"update",value:function(e,t){var n=this._getGameDoc(e);return"currentQuestionId"in t&&(t.currentQuestion=n.collection("questions").doc(t.currentQuestionId),delete t.currentQuestionId),n.update(t)}},{key:"_getGameDoc",value:function(e){return this.firestore.collection("games").doc(e)}},{key:"_convertDocToGame",value:function(e){var t=Object.assign({id:e.id},e.data());return"currentQuestion"in t&&(t.currentQuestionId=t.currentQuestion.id,t.currentQuestion=t.currentQuestion.path),t}}]),n}(j),I=function(e,t){return(new N).get(e,t)},T=function(e){var t=e.playerName,n=e.setPlayerName,r=e.joinGame;return a.a.createElement(h.a,{onSubmit:function(e){e.preventDefault(),r()}},a.a.createElement(m.a,null,a.a.createElement(d.a,null,"\u8f38\u5165\u4f60\u7684\u66b1\u7a31:"),a.a.createElement(p.a,{value:t,onChange:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]+/g,"");n(t)},pattern:"[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~\\\\/-]+",title:"English, symble, numbers only",placeholder:"\u53ea\u9650\u8f38\u5165\u82f1\u6587\u3001\u7b26\u865f\u3001\u6578\u5b57"})),a.a.createElement(v.a,{color:"primary",type:"submit"},"\u52a0\u5165\u623f\u9593"))},A=function(){var e,t=Object(u.q)().gameId,n=Object(r.useState)(""),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)(""),h=Object(i.a)(s,2),m=h[0],d=h[1],p=Object(r.useState)(null),v=Object(i.a)(p,2),g=v[0],y=v[1];Object(r.useEffect)(function(){m&&f.firestore().collection("SID").doc(m).set({name:c,id:m}).then(function(){console.log("Player data stored in Firestore!")}).catch(function(e){console.error("Error storing player data: ",e)})},[m,c]),Object(r.useEffect)(function(){t&&null===g&&I(t).then(y)},[t,g]),e="?playUrl=/play/"+t+"/as/"+m;return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,g?g.name:null),m?void window.location.replace("/Avatar-classroom/#/draw".concat(e)):a.a.createElement(T,{playerName:c,setPlayerName:l,joinGame:function(){return x({name:c,gameId:t}).then(function(e){return d(e.id)})}}))},P=n(270),F=n(271),G=n(272),D=n(288),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new O).get(e,t)},z=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(e){var t=this._popAttr(e,"gameId"),n=this._popAttr(e,"playerId"),r=this._popAttr(e,"questionId");return this.firestore.collection("games").doc(t).collection("answers").add(Object.assign({player:this.firestore.doc(["/games",t,"players",n].join("/")),question:this.firestore.doc(["/games",t,"questions",r].join("/"))},e)).then(function(e){return e.get()}).then(this._convertDocToAnswer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore;return"gameId"in t&&(n=n.collection("games").doc(t.gameId)),n=n.collection("answers"),"questionId"in t&&(n=n.where("question","==",this.firestore.doc("games/".concat(t.gameId,"/questions/").concat(t.questionId)))),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToAnswer(t)})})}},{key:"_convertDocToAnswer",value:function(e){return Object.assign({id:e.id},e.data())}},{key:"_popAttr",value:function(e,t){var n=e[t];return delete e[t],n}}]),n}(j);function W(e,t){var n=e[t];return delete e[t],n}var Q=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.firestore,a={};return"gameId"in n&&(r=r.collection("games").doc(n.gameId).collection("questions"),a.gameId=n.gameId),r.doc(e).get().then(function(e){return t._convertDocToQuestion(e,a)})}},{key:"create",value:function(e){var t=this,n=Object.assign({},e),r=W(n,"gameId");return this.firestore.collection("games").doc(r).collection("questions").add(n).then(function(e){return e.get()}).then(function(e){return t._convertDocToQuestion(e,{gameId:r})})}},{key:"update",value:function(e,t){var n=Object.assign({},t),r=W(n,"gameId");return this.firestore.collection("games").doc(r).collection("questions").doc(e).update(n)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore,r={};return"gameId"in t&&(n=n.collection("games").doc(t.gameId).collection("questions"),r.gameId=t.gameId),"from"in t&&(n=n.where("order",">",t.from)),n=n.orderBy("order"),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToQuestion(t,r)})})}},{key:"_convertDocToQuestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({id:e.id},e.data(),t)}}]),n}(j),U=function(e){var t=new Q,n=(new Date).getTime();return(new N).get(e.gameId).then(function(e){return t.get(e.currentQuestionId,{gameId:e.id})}).then(function(t){return e.isCorrect=t.correctAnswer===e.choice,e.questionId=t.id,e.timestamp=n,console.log(e),(new z).create(e)})},R=function(e){var t=e.recordAnswer,n=e.isAnswerDisabled,r=e.selectedAnswer;return a.a.createElement(P.a,null,["A","B","C","D"].map(function(e){return a.a.createElement(F.a,{sm:12,md:6,className:"mb-4",key:e},a.a.createElement(v.a,{color:"info",className:"w-100 h-100 ".concat(r===e?"":"outline"),onClick:function(){return t(e)},disabled:n},a.a.createElement("strong",null,e)))}))},Y=function(){var e=Object(u.q)(),t=e.gameId,n=e.playerId,o=Object(r.useState)(),c=Object(i.a)(o,2),l=c[0],s=c[1],f=Object(r.useState)(""),h=Object(i.a)(f,2),m=h[0],d=h[1],p=Object(r.useState)(null),v=Object(i.a)(p,2),g=v[0],y=v[1],E=Object(r.useState)(""),b=Object(i.a)(E,2),w=b[0],j=b[1],O=Object(r.useState)(!1),x=Object(i.a)(O,2),k=x[0],_=x[1],L=function(e){e&&(y(null),s(e))};Object(r.useEffect)(function(){t&&n&&(I(t,L),q(n,{gameId:t}).then(function(e){return d(e.name)}))},[t,n]);switch(l?l.state:null){case"pendingQuestion":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("div",null,a.a.createElement("a",null,"\u6e96\u5099\u56de\u7b54\u4e0b\u4e00\u984c"),a.a.createElement(G.a,{color:"info",type:"grow",size:"sm"},"Loading..."),a.a.createElement("a",null,"\u8acb\u770b\u6295\u5f71\u5594!")));case"showingQuestion":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement(P.a,{className:"mb-4"},a.a.createElement(F.a,{sm:12},a.a.createElement("h2",null,"Hi ",m,"!"),a.a.createElement("h3",null,"\u8acb\u770b\u6295\u5f71\u9078\u64c7\u7b54\u6848:"))),a.a.createElement(R,{recordAnswer:function(e){k||(_(!0),U({playerId:n,playerName:m,gameId:t,choice:e}).then(function(e){y(e),setTimeout(function(){y(null),_(!1)},3e3)}).catch(function(e){j(e),setTimeout(function(){j(""),_(!1)},5e3)}))},isAnswerDisabled:k,selectedAnswer:g?g.choice:null}),w?a.a.createElement(D.a,{color:"danger"},w):null,g&&k?a.a.createElement(P.a,{className:"mb-4"},a.a.createElement(F.a,{sm:12},a.a.createElement("h2",null,"\u4f60\u9078\u4e86 ",g.choice,"!"))):a.a.createElement(a.a.Fragment,null));case"showingQuestionResults":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("div",null,a.a.createElement("a",null,"\u986f\u793a\u56de\u7b54\u7d50\u679c"),a.a.createElement(G.a,{color:"info",type:"grow",size:"sm"},"Loading..."),a.a.createElement("a",null,"\u8acb\u770b\u6295\u5f71\u5594!")));default:return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("div",null,a.a.createElement("a",null,"\u7b49\u5f85\u8ab2\u7a0b\u958b\u59cb"),a.a.createElement(G.a,{color:"info",type:"grow",size:"sm"},"Loading..."),a.a.createElement("a",null,"\u958b\u59cb\u5f8c\u8acb\u770b\u6295\u5f71\u5594!")))}},B=n(1),M=n(273),H=n(274),V=n(186),K=n.n(V),Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new O;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:new N).update(e,{state:"waitingForPlayers"}),n.list({gameId:e},t)},J=n(187),X=n.n(J),$=n(289),ee=n(286);function te(){te=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(r||[]);return a(c,"_invoke",{value:_(e,n,i)}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function E(){}var b={};u(b,c,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==n&&r.call(j,c)&&(b=j);var O=E.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,i){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,c,i)},function(e){n("throw",e,c,i)}):t.resolve(s).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,i)})}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,c){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:y,configurable:!0}),y.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,i,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},x(O),u(O,l,"Generator"),u(O,c,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var ne=function(e){var t=e.players;return a.a.createElement("div",null,a.a.createElement("a",{style:{fontSize:28,fontWeight:"bold"}},"\u6b63\u5728\u7b49\u5f85\u5b78\u751f\u52a0\u5165"),a.a.createElement(G.a,{color:"dark",type:"grow"},"Loading..."),a.a.createElement("h1",null,"\u5df2\u6709\xa0",a.a.createElement("a",{className:"display-3"},t.length),"\xa0\u4f4d\u5b78\u751f\u52a0\u5165"),a.a.createElement(M.a,null,t.map(function(e){return a.a.createElement(H.a,{key:e.id},e.name)})))},re=function(e){var t=e.imageSize,n=Object(r.useState)(null),o=Object(i.a)(n,2),c=o[0],l=o[1],u=Object(r.useRef)(null),s=Object(r.useRef)(null),f=window.location.href.replace("lobby","join");return Object(r.useEffect)(function(){(function(){var e=Object(B.a)(te().mark(function e(t){var n;return te().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.toDataURL(t);case 3:n=e.sent,l(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("QR code generation error:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}})()(f)},[]),Object(r.useEffect)(function(){if(c){var e=u.current,t=e.getContext("2d"),n=new Image;n.src=c,n.onload=function(){t.clearRect(0,0,e.width,e.height),t.drawImage(n,0,0)}}},[c]),a.a.createElement("div",{className:"qr-code-container"},a.a.createElement("canvas",{ref:u,width:t,height:t,style:{display:"none"}}),a.a.createElement("img",{ref:s,src:c,alt:"QR Code",className:"qr-code-image",style:{width:t,height:t}}))},ae=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)([]),o=Object(i.a)(n,2),c=o[0],s=o[1],f=Object(r.useState)(null),h=Object(i.a)(f,2),m=h[0],d=h[1],p=window.location.origin,g="".concat(p.replace("https://",""),"/Avatar-classroom/#/join-s/"),y="".concat(p,"/Avatar-classroom/#/join-s/"),E=Object(r.useState)(!1),b=Object(i.a)(E,2),w=b[0],j=b[1];return Object(r.useEffect)(function(){t&&(Z(t,s),I(t).then(d))},[t]),a.a.createElement($.a,null,a.a.createElement($.a.Row,{centered:!0,columns:2},a.a.createElement($.a.Column,{className:"mr-2",width:7},a.a.createElement($.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement("h2",null,"\u52a0\u5165\u904a\u6232\u8acb\u524d\u5f80",a.a.createElement("br",null),a.a.createElement("a",{href:y,rel:"noopener noreferrer",target:"_blank"},g),a.a.createElement("br",null),"\u4e26\u8f38\u5165\u623f\u9593\u4ee3\u78bc"))),a.a.createElement($.a.Row,{verticalAlign:"middle"},a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement("br",null),a.a.createElement("h1",{className:X.a.hero_heading,style:{fontSize:60}},a.a.createElement("strong",null,m?m.shortCode:"___"))))),a.a.createElement($.a.Column,{width:3},a.a.createElement("h2",null,"\u6216\u6383\u63cf QR code\xa0",a.a.createElement(v.a,{outline:!0,color:"dark",onClick:function(){return j(!0)}},"\u653e\u5927")),a.a.createElement(ee.a,{basic:!0,open:w,onClose:function(){return j(!1)}},a.a.createElement(v.a,{close:!0,color:"primary",onClick:function(){return j(!1)}}),a.a.createElement(S,null,a.a.createElement(re,{imageSize:"700px"}))),a.a.createElement(re,null))),a.a.createElement($.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement(l.b,{to:"/host/".concat(t,"/questions/pending")},a.a.createElement(v.a,{size:"lg",color:"primary"},"\u958b\u59cb")))),a.a.createElement($.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement(ne,{players:c}))))},oe=function(e){Object(E.a)(n,e);var t=Object(b.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.email,r=t.password;return this.auth.createUserWithEmailAndPassword(n,r).then(function(t){var n=t.user;return e._convertUser(n)}).catch(function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)})}},{key:"login",value:function(e){var t=this,n=e.email,r=e.password;return this.auth.signInWithEmailAndPassword(n,r).then(function(e){var n=e.user;return t._convertUser(n)}).catch(function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)})}},{key:"onCurrentUserChange",value:function(e){var t=this;this.auth.onAuthStateChanged(function(n){n&&e(t._convertUser(n))})}},{key:"_convertUser",value:function(e){return{id:e.uid,email:e.email,name:e.displayName}}}]),n}(j),ce=function(e){var t=e.email,n=e.password;return(new oe).create({email:t,password:n})},ie=function(e){var t=e.email,n=e.password;return(new oe).login({email:t,password:n})},le=function(e,t){var n=t.email,r=t.password,a=t.authFn,o=t.successCallback;e.preventDefault(),a({email:n,password:r}).then(function(e){return o(e)})},ue=function(e){var t=e.onUserChange,n=Object(r.useState)(""),o=Object(i.a)(n,2),c=o[0],l=o[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),f=s[0],g=s[1];return a.a.createElement(h.a,{className:"mb-5",onSubmit:function(e){return le(e,{email:c,password:f,authFn:ce,successCallback:t})}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"email"},"Email:"),a.a.createElement(p.a,{id:"email",name:"email",value:c,onChange:function(e){return l(e.target.value)}})),a.a.createElement(m.a,null,a.a.createElement(d.a,null,"Password:"),a.a.createElement(p.a,{type:"password",name:"password",value:f,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary"},"Sign Up"))},se=function(e){var t=e.onUserChange,n=Object(r.useState)(""),o=Object(i.a)(n,2),c=o[0],l=o[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),f=s[0],g=s[1];return a.a.createElement(h.a,{className:"mb-5",onSubmit:function(e){return le(e,{email:c,password:f,authFn:ie,successCallback:t})}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"email"},"Email:"),a.a.createElement(p.a,{id:"email",name:"email",value:c,onChange:function(e){return l(e.target.value)}})),a.a.createElement(m.a,null,a.a.createElement(d.a,null,"Password:"),a.a.createElement(p.a,{type:"password",name:"password",value:f,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary"},"Login"))},fe=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),o=n[0],c=n[1],l=Object(r.useState)(null),s=Object(i.a)(l,2),f=s[0],h=s[1],m=function(e){e.preventDefault(),c(!o)};return f?a.a.createElement(u.a,{to:"/games"}):o?a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,"Login to Cahoots!"),a.a.createElement(se,{onUserChange:h}),a.a.createElement("div",null,"No account? ",a.a.createElement("br",null),a.a.createElement(v.a,{color:"link",onClick:m},"Sign Up!"))):a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,"Signup for Cahoots!"),a.a.createElement(ue,{onUserChange:h}),a.a.createElement("div",null,"Have an account? ",a.a.createElement("br",null),a.a.createElement(v.a,{color:"link",onClick:m},"Login")))},he=function(){var e=new oe;return new Promise(function(t){return e.onCurrentUserChange(t)})},me=function(){var e=new N;return he().then(function(t){return t?e.list({ownerId:t.id}):null})},de=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(null),l=Object(i.a)(c,2),s=l[0],f=l[1];return Object(r.useEffect)(function(){me().then(o)},[]),s?a.a.createElement(u.a,{to:s}):a.a.createElement(k.a,{style:{maxWidth:"500px"}},a.a.createElement("h1",null,"\u6211\u7684\u8ab2\u7a0b"),a.a.createElement(M.a,null,n.map(function(e){return a.a.createElement(H.a,{key:e.id,onClick:function(){return f("/games/".concat(e.id))},tag:"button",action:!0},e.name)}),a.a.createElement(H.a,{onClick:function(){return f("/games/create")},tag:"button",color:"info",action:!0},"\u5275\u5efa\u65b0\u8ab2\u7a0b")))},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=String(Math.floor(Math.random()*Math.floor(9999)));return t.create(Object.assign({shortCode:n},e))},ve=function(e){var t=Object(r.useState)(null),n=Object(i.a)(t,2),o=n[0],c=n[1],l=Object(r.useState)(""),s=Object(i.a)(l,2),f=s[0],h=s[1],g=Object(r.useState)(null),y=Object(i.a)(g,2),E=y[0],b=y[1];return Object(r.useEffect)(function(){he().then(c)},[]),E?a.a.createElement(u.a,{to:"/games"}):a.a.createElement(k.a,{style:{maxWidth:"500px"}},a.a.createElement("h1",null,"\u5275\u5efa\u60a8\u7684\u8ab2\u7a0b"),a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"name"},"\u8ab2\u7a0b\u540d\u7a31:"),a.a.createElement(p.a,{id:"name",name:"name",value:f,onChange:function(e){return h(e.target.value)}})),a.a.createElement(v.a,{color:"primary",onClick:function(){return e={name:f,ownerId:o.id},t=b,pe(e).then(t);var e,t}},"\u78ba\u8a8d"))},ge=function(e){return(new Q).list(e)},ye=n(4),Ee=n(275),be=n(276),we=n(277),je=n(278),Oe=n(190),xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Q,n=Object.assign({},e);if("id"in n){var r=W(n,"id");return t.update(r,n)}return t.create(n)},ke=n(116);function _e(){_e=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(r||[]);return a(c,"_invoke",{value:_(e,n,i)}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function E(){}var b={};u(b,c,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==n&&r.call(j,c)&&(b=j);var O=E.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,i){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,c,i)},function(e){n("throw",e,c,i)}):t.resolve(s).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,i)})}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,c){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:y,configurable:!0}),y.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,i,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},x(O),u(O,l,"Generator"),u(O,c,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Le=function(){var e=Object(B.a)(_e().mark(function e(t,n){var r;return _e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.firestore(),e.prev=1,e.next=4,Object(ke.a)(Object(ke.b)(r,"games",n,"questions",t));case 4:window.location.reload(),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error("Error deleting question: "+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}();function Se(){Se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(r||[]);return a(c,"_invoke",{value:_(e,n,i)}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function E(){}var b={};u(b,c,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==n&&r.call(j,c)&&(b=j);var O=E.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,i){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,c,i)},function(e){n("throw",e,c,i)}):t.resolve(s).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,i)})}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,c){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:y,configurable:!0}),y.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,i,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},x(O),u(O,l,"Generator"),u(O,c,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Ce=function(e){var t=e.question,n=e.game,o=Object(r.useState)(t),c=Object(i.a)(o,2),l=c[0],u=c[1],s=Object(r.useState)("default"),f=Object(i.a)(s,2),h=f[0],g=f[1],y=function(e){u(Object.assign({},l,e))},E=function(){var e=Object(B.a)(Se().mark(function e(){return Se().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g("saving"),e.prev=1,e.next=4,Le(l.id,n);case 4:g("default"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error deleting question",e.t0),g("default");case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(Ee.a,{body:!0,className:"mt-4 mb-4"},a.a.createElement(be.a,null,a.a.createElement(we.a,{className:"mb-2"},a.a.createElement(p.a,{type:"textarea",placeholder:"\u8acb\u8f38\u5165\u5b8c\u6574\u984c\u76ee",value:l.text||"",onChange:function(e){return y({text:e.target.value})}}))),["answerA","answerB","answerC","answerD"].map(function(e){return a.a.createElement(we.a,{key:e,className:"mb-2"},a.a.createElement(je.a,{addonType:"prepend"},a.a.createElement(Oe.a,null,e)),a.a.createElement(p.a,{placeholder:"\u8acb\u8f38\u5165\u9078\u9805",value:e in l?l[e]:"",onChange:function(t){return y(Object(ye.a)({},e,t.target.value))}}))}),a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"correctAnswerDropdown"},"\u6b63\u78ba\u7b54\u6848"),a.a.createElement(p.a,{type:"select",name:"correctAnswer",id:"correctAnswerDropdown","data-testid":"correctAnswerDropdown",value:l.correctAnswer||"\u9078\u64c7\u6b63\u78ba\u7b54\u6848",onChange:function(e){return y({correctAnswer:e.target.value})}},a.a.createElement("option",null,"A"),a.a.createElement("option",null,"B"),a.a.createElement("option",null,"C"),a.a.createElement("option",null,"D"),a.a.createElement("option",{hidden:!0},"\u9078\u64c7\u6b63\u78ba\u7b54\u6848"))),"saving"===h?a.a.createElement(v.a,{disabled:!0,color:"primary",className:"mt-4"},a.a.createElement(G.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"\u4fdd\u5b58\u4e2d..."):a.a.createElement(v.a,{color:"primary",className:"mt-4",onClick:function(){g("saving"),xe(l).then(function(){return g("default")})}},"\u4fdd\u5b58"),a.a.createElement(v.a,{color:"danger",className:"mt-4",onClick:E,disabled:"saving"===h},"saving"===h?a.a.createElement(a.a.Fragment,null,a.a.createElement(G.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"\u522a\u9664\u4e2d..."):"\u522a\u9664\u984c\u76ee")))};function Ne(){Ne=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(r||[]);return a(c,"_invoke",{value:_(e,n,i)}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function E(){}var b={};u(b,c,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==n&&r.call(j,c)&&(b=j);var O=E.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,i){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,c,i)},function(e){n("throw",e,c,i)}):t.resolve(s).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,i)})}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,c){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:y,configurable:!0}),y.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,i,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},x(O),u(O,l,"Generator"),u(O,c,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Ie=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)(null),o=Object(i.a)(n,2),c=o[0],s=o[1],h=Object(r.useState)([]),m=Object(i.a)(h,2),d=m[0],p=m[1],g=Object(r.useState)(!1),y=Object(i.a)(g,2),E=y[0],b=y[1],w=Object(u.o)(),j=function(){var e=Object(B.a)(Ne().mark(function e(){var n;return Ne().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!c){e.next=11;break}return e.prev=1,n=f.firestore(),e.next=5,Object(ke.a)(Object(ke.b)(n,"games",t));case 5:w("/games"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("\u522a\u9664\u904a\u6232\u6642\u767c\u751f\u932f\u8aa4",e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){t&&null===c&&I(t).then(function(e){return s(e),e}).then(function(e){return ge({gameId:e.id})}).then(p)},[t,c]),c?a.a.createElement(S,{maxWidth:500},a.a.createElement("h1",{className:"mb-4"},c.name),a.a.createElement(k.a,null,d.length>0?a.a.createElement(l.b,{to:"/lobby/".concat(t)},a.a.createElement(v.a,{color:"success",size:"lg"},"\u958b\u59cb\u8ab2\u7a0b")):null,a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(v.a,{color:"primary",onClick:function(){return b(!E)}},E?"\u7d50\u675f\u7de8\u8f2f":"\u7de8\u8f2f\u8ab2\u7a0b"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(v.a,{style:{marginBottom:20},onClick:j,color:"danger"},"\u522a\u9664\u8ab2\u7a0b")),E&&a.a.createElement(k.a,null,d.map(function(e){return a.a.createElement(Ce,{key:e.id,question:e,game:t})}),a.a.createElement(k.a,null,a.a.createElement(v.a,{onClick:function(){xe({gameId:t,order:d.length+1}).then(function(e){return p(d.concat([e]))})}},"\u65b0\u589e\u984c\u76ee"),a.a.createElement("br",null)))):a.a.createElement(S,{maxWidth:500},"Loading...")},Te=function(e){var t=new N,n=new Q;return t.update(e,{state:"pendingQuestion"}),t.get(e).then(function(e){return"currentQuestion"in e?n.get(e.currentQuestion):void 0}).then(function(t){var r=t?t.order:0;return n.list({gameId:e,from:r,limit:1})}).then(function(n){var r=n[0];return r&&t.update(e,{currentQuestionId:r.id}),r})},Ae=function e(t){var n=t.endDate,r=t.intervalCallback,a=t.endedCallback;setTimeout(function(){var t=function(e){var t=(e-Date.now())/1e3;return t>0?t:0}(n);t>0?(r(t),e({endDate:n,intervalCallback:r,endedCallback:a})):a(t)},1e3)},Pe=function(e){var t=e.seconds,n=e.intervalCallback,r=e.endedCallback,a=new Date(Date.now()+1e3*t);Ae({endDate:a,intervalCallback:n,endedCallback:r})},Fe=function(e){e.parentUrl;var t=Object(u.q)().gameId,n=Object(r.useState)(3),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)(null),f=Object(i.a)(s,2),h=f[0],m=f[1];Object(r.useEffect)(function(){t&&(Pe({seconds:3,intervalCallback:l,endedCallback:l}),Te(t).then(m))},[t]);var d="/host/"+t;return a.a.createElement(S,{verticalCentered:!0},a.a.createElement("div",{style:{fontSize:25}},"\u4e0b\u4e00\u984c..."),a.a.createElement("div",{className:"display-1 mt-4"},Math.ceil(c)),c<=0&&h?a.a.createElement(u.a,{to:"".concat(d,"/questions/current")}):null)},Ge=n(279),De=n(280),qe=function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Q).get(e,t)},ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new N,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new z;return n.update(e,{state:"showingQuestionResults"}),r.list({gameId:e,questionId:t}).then(function(e){var t={A:[],B:[],C:[],D:[]},n=e.reduce(function(e,t){return(!e[t.playerName]||t.timestamp>e[t.playerName].timestamp)&&(e[t.playerName]=t),e},{});return Object.values(n).forEach(function(e){t[e.choice]=t[e.choice].concat(e.playerName)}),t})},We=function(e){return(new Q).list({gameId:e}).then(function(e){return e.length})},Qe=function(e,t){return e.correctAnswer===t},Ue=function(e){var t=e.result,n=e.className,r=e.question;return a.a.createElement("div",{className:n},a.a.createElement("h2",{className:"mb-4"},r?r.text:null),a.a.createElement(P.a,null,Object.entries(t).map(function(e){var t=Object(i.a)(e,2),n=t[0],o=t[1];return a.a.createElement(F.a,{sm:12,md:6,className:"mb-4"},a.a.createElement(Ee.a,{color:Qe(r,n)?"success":null,inverse:!!Qe(r,n)||null},a.a.createElement(Ge.a,null,a.a.createElement(be.a,null,a.a.createElement("strong",{className:"mr-2",style:{fontSize:20}},n),Qe(r,n)?"\u2714\ufe0f":"\u274c"),a.a.createElement(be.a,null,a.a.createElement("strong",{style:{fontSize:17}},r["answer".concat(n)])),a.a.createElement(De.a,{style:{fontSize:17}},o.join(", ")))))})))},Re=function(e){e.parentUrl;var t=Object(u.q)(),n=t.gameId,o=t.questionId,c=Object(r.useState)({}),s=Object(i.a)(c,2),f=s[0],h=s[1],m=Object(r.useState)(null),d=Object(i.a)(m,2),p=d[0],g=d[1],y=Object(r.useState)(null),E=Object(i.a)(y,2),b=E[0],w=E[1];Object(r.useEffect)(function(){n&&o&&(qe(o,{gameId:n}).then(g),We(n).then(w),ze(n,o).then(h))},[n,o]);var j="/host/"+n;return a.a.createElement(S,{verticalCentered:!0},a.a.createElement(Ue,{className:"mb-4",result:f,question:p}),a.a.createElement(k.a,null,p&&p.order>=b?a.a.createElement(l.b,{to:"".concat(j,"/results/final")},a.a.createElement(v.a,{color:"primary"},"\u986f\u793a\u8ab2\u7a0b\u6700\u7d42\u7d50\u679c")):a.a.createElement(l.b,{to:"".concat(j,"/questions/pending")},a.a.createElement(v.a,{color:"primary"},"\u4e0b\u4e00\u984c"))))},Ye=n(281),Be=new N,Me=function(e){var t=new z;return Be.update(e,{state:"draft"}),t.list({gameId:e}).then(function(e){return e.filter(function(e){return"isCorrect"in e&&!!e.isCorrect}).reduce(function(e,t){return t.playerName in e?e[t.playerName]+=1:e[t.playerName]=1,e},{})})},He=function(e,t){var n=Object(i.a)(e,2)[1],r=Object(i.a)(t,2)[1];return n>r?-1:n<r?1:0},Ve=function(e){var t=e.results,n=Object.entries(t);return n.sort(He),a.a.createElement(M.a,null,n.slice(0,5).map(function(e,t){var n=Object(i.a)(e,2),r=n[0],o=n[1];return t<=2?a.a.createElement(H.a,{key:r,className:"d-flex justify-content-between",style:{fontSize:17}},r,a.a.createElement(Ye.a,{className:"ml-4 p-2",color:"success"},o)):a.a.createElement(H.a,{key:r,className:"d-flex justify-content-between"},r,a.a.createElement(Ye.a,{className:"ml-4 p-2"},o))}))},Ke=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)({}),o=Object(i.a)(n,2),c=o[0],s=o[1];return Object(r.useEffect)(function(){t&&Me(t).then(s)},[t]),a.a.createElement(S,{verticalCentered:!0,maxWidth:500},a.a.createElement("h1",null,"\u8ab2\u7a0b\u7d50\u679c"),a.a.createElement(Ve,{results:c}),a.a.createElement("br",null),a.a.createElement(k.a,null,a.a.createElement(l.b,{to:"/games"},a.a.createElement(v.a,{color:"primary"},"\u56de\u984c\u76ee\u5217\u8868"))),a.a.createElement("br",null),a.a.createElement(k.a,null,a.a.createElement(l.b,{to:"/"},a.a.createElement(v.a,{color:"primary"},"\u56de\u9996\u9801"))))},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new N,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Q;return t.update(e,{state:"showingQuestion"}),t.get(e).then(function(e){return n.get(e.currentQuestion)})},Je=function(e){var t=e.question,n=e.className;return a.a.createElement("div",{className:n},a.a.createElement("h2",{className:"mb-4",style:{fontSize:24}},t.text),a.a.createElement(P.a,null,["A","B","C","D"].map(function(e){return a.a.createElement(F.a,{key:e,sm:12,md:6,className:"mb-4"},a.a.createElement(Ee.a,null,a.a.createElement(Ge.a,null,a.a.createElement(be.a,null,a.a.createElement("strong",{style:{fontSize:20}},e)),a.a.createElement(De.a,{style:{fontSize:20}},t["answer".concat(e)]))))})))},Xe=function(e){var t=e.isVisible,n=e.linkTo;return t?a.a.createElement(v.a,{color:"primary",onClick:function(){t&&(window.location.href=n)}},"\u986f\u793a\u56de\u7b54\u7d50\u679c"):null},$e=function(e){e.parentUrl;var t=Object(u.q)().gameId,n=Object(r.useState)(null),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(r.useState)(10),f=Object(i.a)(s,2),h=f[0],m=f[1];return Object(r.useEffect)(function(){t&&(Pe({seconds:10,intervalCallback:m,endedCallback:m}),Ze(t).then(l))},[t]),a.a.createElement(S,{verticalCentered:!0},c?a.a.createElement("div",null,a.a.createElement(Je,{question:c}),a.a.createElement("div",{className:"mt-4"},"\u5269\u9918\u6642\u9593:"),a.a.createElement("div",{className:"display-1"},Math.ceil(h)),a.a.createElement(Xe,{isVisible:h<=0,linkTo:"https://cxw0520.github.io/AC-Three/?GID=".concat(t,"&QID=").concat(c.id)})):a.a.createElement("div",null,"\u8acb\u7a0d\u7b49..."))},et=n(285);var tt=function(){var e=a.a.useState(null),t=Object(i.a)(e,2),n=t[0],r=t[1];return a.a.useEffect(function(){f.auth().onAuthStateChanged(function(e){r(e)})},[]),a.a.createElement(et.a,{size:"large"},a.a.createElement(et.a.Item,{as:l.b,to:"/"},"Avatar Classroom"),a.a.createElement(et.a.Menu,{position:"right"},n?a.a.createElement(a.a.Fragment,null,a.a.createElement(et.a.Item,{as:l.b,to:"/games"},"\u6211\u7684\u8ab2\u7a0b"),a.a.createElement(et.a.Item,{as:l.b,to:"/join-s"},"\u5b78\u751f\u9023\u7d50"),a.a.createElement(et.a.Item,{as:l.b,to:"/settings"},"\u8a2d\u5b9a"),a.a.createElement(et.a.Item,{onClick:function(){return f.auth().signOut()},as:l.b,to:"/"},"\u767b\u51fa")):a.a.createElement(a.a.Fragment,null,a.a.createElement(et.a.Item,{as:l.b,to:"/join-s"},"\u5b78\u751f\u9023\u7d50"),a.a.createElement(et.a.Item,{as:l.b,to:"/signin"},"\u8a3b\u518a/\u767b\u5165"))))},nt=n(282),rt=n(284),at=n(287);n(252);var ot=function(){var e=a.a.useState("register"),t=Object(i.a)(e,2),n=t[0],r=t[1],o=a.a.useState(""),c=Object(i.a)(o,2),l=c[0],s=c[1],h=a.a.useState(""),m=Object(i.a)(h,2),d=m[0],p=m[1],v=Object(u.o)(),g=a.a.useState(""),y=Object(i.a)(g,2),E=y[0],b=y[1],w=a.a.useState(!1),j=Object(i.a)(w,2),O=j[0],x=j[1];return a.a.createElement(nt.a,null,a.a.createElement(et.a,{widths:"2"},a.a.createElement(et.a.Item,{active:"register"===n,onClick:function(){b(""),r("register")}},"\u8a3b\u518a"),a.a.createElement(et.a.Item,{active:"signin"===n,onClick:function(){b(""),r("signin")}},"\u767b\u5165")),a.a.createElement(rt.a,{onSubmit:function(){x(!0),"register"===n?f.auth().createUserWithEmailAndPassword(l,d).then(function(){v("/"),x(!1)}).catch(function(e){switch(e.code){case"auth/email-already-in-use":b("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":b("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":b("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}}):"signin"===n&&f.auth().signInWithEmailAndPassword(l,d).then(function(){v("/"),x(!1)}).catch(function(e){var t=e.code;switch(console.log(t),t){case"auth/invalid-email":b("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/internal-error":b("\u6b64\u4fe1\u7bb1\u5c1a\u672a\u8a3b\u518a \u6216 \u5bc6\u78bc\u932f\u8aa4"),x(!1)}})}},a.a.createElement(rt.a.Input,{label:"\u4fe1\u7bb1",value:l,onChange:function(e){return s(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),a.a.createElement(rt.a.Input,{label:"\u5bc6\u78bc",value:d,onChange:function(e){return p(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password"}),E&&a.a.createElement(at.a,{negative:!0},E),a.a.createElement(rt.a.Button,{loading:O},"register"===n&&"\u8a3b\u518a","signin"===n&&"\u767b\u5165")))},ct=n(113),it=n(191),lt=n(161);function ut(){ut=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(r||[]);return a(c,"_invoke",{value:_(e,n,i)}),c}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function E(){}var b={};u(b,c,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(I([])));j&&j!==n&&r.call(j,c)&&(b=j);var O=E.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,c,i){var l=f(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,c,i)},function(e){n("throw",e,c,i)}):t.resolve(s).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,i)})}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,c){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=L(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=E,a(O,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:y,configurable:!0}),y.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,i,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then(function(e){return e.done?e.value:c.next()})},x(O),u(O,l,"Generator"),u(O,c,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var st=Object(lt.a)();function ft(e){var t=e.fieldName,n=e.type,r=void 0===n?"text":n,o=e.canvasProps,c=e.setCanvasProps,i=e.displayName,l="validation".concat(t);return a.a.createElement("div",{className:"p-0 col-10"},a.a.createElement("label",{htmlFor:l,className:"form-label"},i),a.a.createElement("input",{name:t,type:r,className:"form-control",id:l,value:o[t],onChange:function(e){var n=e.target;c(function(e){return Object(ct.a)(Object(ct.a)({},e),{},Object(ye.a)({},t,n.value))})},min:1,max:30}))}var ht=function(){var e=a.a.useState(""),t=Object(i.a)(e,2),n=t[0],o=t[1],c=a.a.useState(null),l=Object(i.a)(c,2),u=l[0],s=l[1];a.a.useEffect(function(){var e=window.location.href.lastIndexOf("=")+1,t=window.location.href.substring(e);o(t);var n=window.location.href.lastIndexOf("/")+1,r=window.location.href.substring(n),a=Object(lt.b)(st,"svgs/".concat(r+".svg"));s(a)},[]);var f=a.a.useState({className:"react-sketch-canvas",width:"100%",height:"450PX",backgroundImage:"https://upload.wikimedia.org/wikipedia/commons/7/70/Graph_paper_scan_1600x1000_%286509259561%29.jpg",preserveBackgroundImageAspectRatio:"none",strokeWidth:4,eraserWidth:5,strokeColor:"#000000",canvasColor:"#FFFFFF",style:{borderRight:"1px solid #CCC"},svgStyle:{},exportWithBackgroundImage:!1,withTimestamp:!0,allowOnlyPointerType:"all",withViewBox:!1}),h=Object(i.a)(f,2),m=h[0],d=h[1],p=a.a.createRef(),v=a.a.useState(""),g=Object(i.a)(v,2),y=g[0],E=g[1],b=a.a.useState("outline-"),w=Object(i.a)(b,2),j=w[0],O=w[1],x=a.a.useState(""),k=Object(i.a)(x,2),_=(k[0],k[1],a.a.useState("")),L=Object(i.a)(_,2),S=(L[0],L[1]),C=a.a.useState([]),N=Object(i.a)(C,2),I=(N[0],N[1]),T=a.a.useState({stroke:null,isEraser:null}),A=Object(i.a)(T,2),P=(A[0],A[1]),F=a.a.useState("png"),G=Object(i.a)(F,2),D=(G[0],G[1],Object(r.useState)(!1)),q=Object(i.a)(D,2),z=q[0],W=q[1],Q=function(e,t,n,r,o){return a.a.createElement("button",{key:e,className:"btn btn-".concat(r).concat(n," ").concat(o," mb-3 btn-lg"),type:"button",onClick:t},e)},U=[["\u756b\u7b46",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.eraseMode;t&&(E(""),O("outline-"),t(!1))},"primary",y,""],["\u6a61\u76ae\u64e6",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.eraseMode;t&&(E("outline-"),O(""),t(!0))},"primary",j,"mr-3"]],R=[["\u5fa9\u539f",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.undo;t&&t()},"secondary","outline-",""],["\u53d6\u6d88\u5fa9\u539f",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.redo;t&&t()},"secondary","outline-",""],["\u6e05\u9664\u5168\u90e8",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.clearCanvas;t&&t()},"secondary","outline-",""],["\u91cd\u7f6e",function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.resetCanvas;t&&t()},"secondary","outline-","mr-3"]],Y=[["\u5b8c\u6210",function(){var e=Object(B.a)(ut().mark(function e(){var t,n,r,a;return ut().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===(t=p.current)||void 0===t?void 0:t.exportSvg)){e.next=10;break}return e.next=4,n();case 4:r=e.sent,S(r),W(!0),r=r.replace('<rect id="react-sketch-canvas__mask-background" x="0" y="0" width="100%" height="100%" fill="white"></rect></g><defs></defs><g id="react-sketch-canvas__canvas-background-group"><rect id="react-sketch-canvas__canvas-background" x="0" y="0" width="100%" height="100%" fill="#FFFFFF"></rect>',""),a=new Blob([r],{type:"image/svg+xml"}),Object(lt.c)(u,a).then(function(e){console.log("SVG upload to Firebase succeed")}).catch(function(e){console.error("SVG upload to Firebase failed",e)});case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),"success","","mr-3"]],M=[["\u4e0b\u4e00\u6b65",function(){z?window.location.href="/Avatar-classroom/#".concat(n):alert("\u8acb\u5148\u756b\u5716\u4e26\u6309\u5b8c\u6210")},"success","","mr-3"]];return a.a.createElement("main",{className:"container-fluid p-2 justify-content-center"},a.a.createElement("div",{className:"row"},a.a.createElement("section",{className:"col-12"},a.a.createElement("div",{class:"row justify-content-center"},a.a.createElement("h1",null,"\u756b\u51fa\u4f60\u7684\u865b\u64ec\u5316\u8eab")),a.a.createElement("section",{className:"row no-gutters canvas-area m-1 p-0"},a.a.createElement("div",{className:"col-12 canvas p-0"},a.a.createElement(it.a,Object.assign({ref:p,onChange:function(e){I(e)},onStroke:function(e,t){return P({stroke:e,isEraser:t})}},m)))),a.a.createElement("form",{className:"d-flex flex-column align-items-center"},a.a.createElement("div",{class:"row justify-content-center"},a.a.createElement("div",{className:"col-12 panel d-flex flex-column align-items-center mt-2"},a.a.createElement("div",{class:"btn-group",role:"group","aria-label":"buttonsWithHandlers"},R.map(function(e){var t=Object(i.a)(e,5),n=t[0],r=t[1],a=t[2],o=t[3],c=t[4];return Q(n,r,a,o,c)}))),a.a.createElement("div",{className:"col-12 panel d-flex flex-column align-items-center"},a.a.createElement("div",null,a.a.createElement("div",{class:"btn-group",role:"group","aria-label":"buttonsPenEraser"},U.map(function(e){var t=Object(i.a)(e,5),n=t[0],r=t[1],a=t[2],o=t[3],c=t[4];return Q(n,r,a,o,c)})),a.a.createElement("div",{class:"btn-group",role:"group","aria-label":"buttonsDone"},Y.map(function(e){var t=Object(i.a)(e,5),n=t[0],r=t[1],a=t[2],o=t[3],c=t[4];return Q(n,r,a,o,c)})),a.a.createElement("div",{class:"btn-group",role:"group","aria-label":"buttonsNext"},M.map(function(e){var t=Object(i.a)(e,5),n=t[0],r=t[1],a=t[2],o=t[3],c=t[4];return Q(n,r,a,o,c)})))),a.a.createElement("div",{className:"col-10 d-flex flex-column align-items-center"},[["strokeWidth","range","\u756b\u7b46\u7c97\u7d30"],["eraserWidth","range","\u6a61\u76ae\u64e6\u7c97\u7d30"]].map(function(e){var t=Object(i.a)(e,3),n=t[0],r=t[1],o=t[2];return a.a.createElement(ft,{key:n,fieldName:n,displayName:o,type:r,canvasProps:m,setCanvasProps:d})})))))))},mt=n(291),dt=n(254),pt=n(292),vt=n(283);var gt=function(e){var t=e.user,n=a.a.useState(!1),r=Object(i.a)(n,2),o=r[0],c=r[1],l=a.a.useState(!1),u=Object(i.a)(l,2),s=u[0],h=u[1],m=a.a.useState(""),d=Object(i.a)(m,2),p=d[0],v=d[1],g=a.a.useState(!1),y=Object(i.a)(g,2),E=y[0],b=y[1],w=a.a.useState(""),j=Object(i.a)(w,2),O=j[0],x=j[1],k=a.a.useState(""),_=Object(i.a)(k,2),L=_[0],S=_[1];return a.a.createElement(nt.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(mt.a,null,"\u6211\u7684\u6a94\u6848"),a.a.createElement(mt.a,{size:"small"},"\u4f7f\u7528\u8005\u540d\u7a31",a.a.createElement(dt.a,{floated:"right",onClick:function(){return c(!0)}},"\u4fee\u6539")),a.a.createElement(pt.a,{vertical:!0},t.displayName),a.a.createElement(ee.a,{basic:!0,open:o,size:"mini"},a.a.createElement(ee.a.Header,null,"\u4fee\u6539\u4f7f\u7528\u8005\u540d\u7a31"),a.a.createElement(ee.a.Content,null,a.a.createElement(vt.a,{placeholder:"\u8f38\u5165\u65b0\u7684\u4f7f\u7528\u8005\u540d\u7a31",value:p,onChange:function(e){return v(e.target.value)},fluid:!0})),a.a.createElement(ee.a.Actions,null,a.a.createElement(dt.a,{onClick:function(){return c(!1)}},"\u53d6\u6d88"),a.a.createElement(dt.a,{onClick:function(){b(!0),t.updateProfile({displayName:p}).then(function(){v(""),c(!1),b(!1)})},loading:E},"\u4fee\u6539")))),a.a.createElement(a.a.Fragment,null,a.a.createElement(mt.a,{size:"small"},"\u4fee\u6539\u5bc6\u78bc",a.a.createElement(dt.a,{floated:"right",onClick:function(){return h(!0)}},"\u4fee\u6539")),a.a.createElement(pt.a,{vertical:!0},"********"),a.a.createElement(ee.a,{basic:!0,size:"mini",open:s},a.a.createElement(ee.a.Header,null,"\u4fee\u6539\u4f7f\u7528\u8005\u5bc6\u78bc"),a.a.createElement(ee.a.Content,null,a.a.createElement(ee.a.Header,{size:"small"},"\u76ee\u524d\u5bc6\u78bc"),a.a.createElement(vt.a,{placeholder:"\u8f38\u5165\u820a\u5bc6\u78bc",value:O,onChange:function(e){return x(e.target.value)},fluid:!0}),a.a.createElement(mt.a,null),a.a.createElement(ee.a.Header,{size:"small"},"\u65b0\u5bc6\u78bc"),a.a.createElement(vt.a,{placeholder:"\u8f38\u5165\u65b0\u5bc6\u78bc",value:L,onChange:function(e){return S(e.target.value)},fluid:!0})),a.a.createElement(ee.a.Actions,null,a.a.createElement(dt.a,{onClick:function(){return h(!1)}},"\u53d6\u6d88"),a.a.createElement(dt.a,{onClick:function(){b(!0);var e=f.auth.EmailAuthProvider.credential(t.email,O);t.reauthenticateWithCredential(e).then(function(){t.updatePassword(L).then(function(){h(!1),x(""),S(""),b(!1)})})},loading:E},"\u4fee\u6539")))))},yt=n(70),Et=n.n(yt),bt=n(192),wt=n.n(bt);function jt(e){var t=e.src;return a.a.createElement("div",{className:wt.a.videobox},a.a.createElement("iframe",{frameBorder:"0",src:t,allowFullScreen:"true",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"}))}var Ot=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1];return a.a.useEffect(function(){f.auth().onAuthStateChanged(function(e){o(e)})}),a.a.createElement(nt.a,{style:{width:"100%",height:"100vh"}},a.a.createElement($.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement("div",{className:Et.a.hero_heading,style:{fontWeight:"bold"}},"Avatar")),a.a.createElement($.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement("div",{className:Et.a.hero_heading,style:{fontWeight:"bold"}},"Classroom")),a.a.createElement($.a,{centered:!0,style:{marginTop:"60px"}},a.a.createElement("div",{style:{fontSize:30}},"\u70ba\u60a8\u63d0\u4f9b\u5168\u65b0\u7684\u4e00\u500b\u6559\u5b78\u6e2c\u9a57\u6a21\u5f0f")),a.a.createElement($.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement("div",{style:{fontSize:30}},"\u8acb\u642d\u914d Webcam \u651d\u5f71\u6a5f\u4f7f\u7528")),n?a.a.createElement(a.a.Fragment,null):a.a.createElement($.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement(dt.a,{color:"positive",size:"large",as:l.b,to:"/signin"},"\u7acb\u5373\u8a3b\u518a/\u767b\u5165")),a.a.createElement($.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement($.a.Column,{width:12},a.a.createElement(jt,{src:"https://www.youtube.com/embed/3_E6Fre4cSg?si=gkOslkNzKeLguoxh",controls:!0,width:"100%"}))),a.a.createElement("br",null),a.a.createElement($.a,{style:{marginTop:"120px"}},a.a.createElement($.a.Column,{floated:"left",width:10},a.a.createElement("div",{className:Et.a.small_note},"\u88fd\u4f5c\u4eba\u540d\u55ae"),a.a.createElement("div",{className:Et.a.small_note},"\u5433\u627f\u8ed2\xa0\u9673\u82e1\u929c\xa0\u891a\u5e1b\u8aed\xa0\u6d2a\u9e92\u7965")),a.a.createElement($.a.Column,{floated:"right",width:6},a.a.createElement("div",{className:Et.a.small_note,style:{textAlign:"right"}},"In Memory of"),a.a.createElement("div",{className:Et.a.small_note,style:{textAlign:"right"}},"\u6d2a\u9e92\u7965"))))},xt=function(e){return(new N).list({shortCode:String(e),state:C.STATE_WAITING_FOR_PLAYERS})};var kt=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),f=s[0],g=s[1];return n.length>1?a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement(M.a,null,n.map(function(e){return a.a.createElement(l.b,{key:e.id,to:"/join/".concat(e.id)},a.a.createElement(H.a,{tag:"button",action:!0},e.name))}))):1===n.length?a.a.createElement(u.a,{to:"/join/".concat(n[0].id)}):a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",{className:Et.a.hero_heading},"Avatar Classroom"),a.a.createElement(h.a,{className:"mb-5",onSubmit:function(e){e.preventDefault(),xt(f).then(o)}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"shortCode"},"\u623f\u9593\u4ee3\u78bc:"),a.a.createElement(p.a,{id:"shortCode",type:"number",value:f,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary",disabled:!f,type:"submit"},"\u52a0\u5165\u623f\u9593")),a.a.createElement("aside",{hidden:!0},"Want to create your own quiz?\xa0",a.a.createElement(l.b,{to:"/login"},"Sign Up")))};var _t=function(){var e=a.a.useState(null),t=Object(i.a)(e,2),n=t[0],r=t[1];return a.a.useEffect(function(){f.auth().onAuthStateChanged(function(e){r(e)})}),a.a.createElement(l.a,null,a.a.createElement(tt,null),a.a.createElement("div",{className:"App"},a.a.createElement(u.d,null,a.a.createElement(u.b,{path:"/login",element:a.a.createElement(fe,null),key:fe.id}),a.a.createElement(u.b,{path:"/",exact:!0,element:a.a.createElement(Ot,null),key:Ot.id}),a.a.createElement(u.b,{path:"/signin",exact:!0,element:a.a.createElement(ot,null),key:ot.id}),a.a.createElement(u.b,{path:"/join-s",exact:!0,element:a.a.createElement(kt,null)}),a.a.createElement(u.b,{path:"/lobby/:gameId",element:a.a.createElement(ae,null),key:ae.id}),a.a.createElement(u.b,{path:"/play/:gameId/as/:playerId",element:a.a.createElement(Y,null),key:Y.id}),a.a.createElement(u.b,{path:"/join/:gameId",element:a.a.createElement(A,null),key:A.id}),a.a.createElement(u.b,{path:"/games/create",element:a.a.createElement(ve,null),key:ve.id}),a.a.createElement(u.b,{path:"/games/:gameId",element:a.a.createElement(Ie,null),key:Ie.id}),a.a.createElement(u.b,{path:"/games",exact:!0,element:a.a.createElement(de,null),key:de.id}),a.a.createElement(u.b,{path:"/draw",exact:!0,element:a.a.createElement(ht,null),key:ht.id}),a.a.createElement(u.b,{path:"/settings",exact:!0,element:a.a.createElement(gt,{user:n}),key:gt.id}),a.a.createElement(u.b,{path:"/host/:gameId/questions/pending",element:a.a.createElement(Fe,null),key:Fe.id}),a.a.createElement(u.b,{path:"/host/:gameId/questions/current",element:a.a.createElement($e,null),key:$e.id}),a.a.createElement(u.b,{path:"/host/:gameId/results/final",element:a.a.createElement(Ke,null),key:Ke.id}),a.a.createElement(u.b,{path:"/host/:gameId/results/:questionId",element:a.a.createElement(Re,null),key:Re.id}))))};n(250);c.a.render(a.a.createElement(_t,null),document.getElementById("root"))},70:function(e,t,n){e.exports={hero_heading:"styles_hero_heading__1pfyu",small_note:"styles_small_note__Xgoyt",nomal_text:"styles_nomal_text__1MUKj"}}},[[206,1,2]]]);
//# sourceMappingURL=main.21c00d6e.chunk.js.map