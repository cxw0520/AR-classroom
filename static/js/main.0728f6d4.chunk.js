(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){e.exports={hero_heading:"styles_hero_heading__2bf5D"}},131:function(e,t,n){e.exports={hero_heading:"styles_hero_heading__3G9nH"}},186:function(e,t,n){e.exports={centered:"styles_centered__2VJdW"}},192:function(e,t,n){e.exports={videobox:"RwdYoutube_videobox__3qM6I"}},206:function(e,t,n){e.exports=n(251)},212:function(e,t,n){},214:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(68),i=n.n(o),c=(n(212),n(7)),l=n(27),u=n(18),s=(n(213),n(214),n(64));s.a.apps.length||s.a.initializeApp({apiKey:"AIzaSyAUlqVFqNfKTY34UCA0_jt9kHlTqMgDzi0",authDomain:"ar-classroom-1bb48.firebaseapp.com",projectId:"ar-classroom-1bb48",storageBucket:"ar-classroom-1bb48.appspot.com",messagingSenderId:"801778279327",appId:"1:801778279327:web:e63f67b115057a5e2c53aa",measurementId:"G-DEC44C4SPG"});var h=s.a,f=n(265),m=n(266),d=n(267),p=n(268),v=n(269),g=n(2),y=n(3),b=n(9),E=n(10),w=(n(253),n(215),{apiKey:"AIzaSyAUlqVFqNfKTY34UCA0_jt9kHlTqMgDzi0",authDomain:"ar-classroom-1bb48.firebaseapp.com",projectId:"ar-classroom-1bb48",storageBucket:"ar-classroom-1bb48.appspot.com",messagingSenderId:"801778279327",appId:"1:801778279327:web:e63f67b115057a5e2c53aa",measurementId:"G-DEC44C4SPG"}),j=Object(y.a)(function e(t){Object(g.a)(this,e),void 0!==s.a.apps&&(s.a.apps.length||s.a.initializeApp(w)),this.firestore=s.a.firestore(),this.auth=s.a.auth()}),O=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.firestore.collection("games").doc(t.gameId).collection("players").doc(e).get().then(this._convertDocToPlayer)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.firestore;if("gameId"in e){var n=e.gameId;delete e.gameId,t=t.collection("games").doc(n).collection("players")}return t.add(e).then(function(e){return e.get()}).then(this._convertDocToPlayer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=this.firestore;return"gameId"in t&&(r=r.collection("games").doc(t.gameId)),r=r.collection("players"),"limit"in t&&(r=r.limit(t.limit)),void 0!==n?r.onSnapshot(function(t){var r=[];t.forEach(function(t){return r.push(e._convertDocToPlayer(t))}),n(r)}):r.get().then(function(t){return t.docs.map(function(t){return e._convertDocToQuestion(t)})})}},{key:"_convertDocToPlayer",value:function(e){return Object.assign({id:e.id},e.data())}}]),n}(j),x=function(e){return(new O).create(e)},k=n(264),L=n(186),_=n.n(L),S=function(e){return a.a.createElement(k.a,{className:_.a.centered,style:{maxWidth:e.maxWidth||null,height:e.verticalCentered?"100%":null}},e.children)},C=function(){function e(){Object(g.a)(this,e)}return Object(y.a)(e,null,[{key:"STATE_DRAFT",get:function(){return"draft"}},{key:"STATE_WAITING_FOR_PLAYERS",get:function(){return"waitingForPlayers"}}]),e}(),I=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.firestore.collection("games").add(Object.assign({state:C.STATE_DRAFT},e)).then(function(e){return e.get()}).then(this._convertDocToGame)}},{key:"get",value:function(e,t){var n=this,r=this._getGameDoc(e);return void 0!==t?r.onSnapshot(function(e){return t(n._convertDocToGame(e))}):r.get().then(this._convertDocToGame)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore.collection("games");return"ownerId"in t&&(n=n.where("ownerId","==",t.ownerId)),"state"in t&&(n=n.where("state","==",t.state)),"shortCode"in t&&(n=n.where("shortCode","==",t.shortCode)),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToGame(t)})})}},{key:"update",value:function(e,t){var n=this._getGameDoc(e);return"currentQuestionId"in t&&(t.currentQuestion=n.collection("questions").doc(t.currentQuestionId),delete t.currentQuestionId),n.update(t)}},{key:"_getGameDoc",value:function(e){return this.firestore.collection("games").doc(e)}},{key:"_convertDocToGame",value:function(e){var t=Object.assign({id:e.id},e.data());return"currentQuestion"in t&&(t.currentQuestionId=t.currentQuestion.id,t.currentQuestion=t.currentQuestion.path),t}}]),n}(j),N=function(e,t){return(new I).get(e,t)},T=function(e){var t=e.playerName,n=e.setPlayerName,r=e.joinGame;return a.a.createElement(f.a,{onSubmit:function(e){e.preventDefault(),r()}},a.a.createElement(m.a,null,a.a.createElement(d.a,null,"\u8f38\u5165\u4f60\u7684\u66b1\u7a31:"),a.a.createElement(p.a,{value:t,onChange:function(e){return n(e.target.value)}})),a.a.createElement(v.a,{color:"primary",type:"submit"},"\u52a0\u5165\u623f\u9593"))},A=function(){var e,t=Object(u.q)().gameId,n=Object(r.useState)(""),o=Object(c.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),f=Object(c.a)(s,2),m=f[0],d=f[1],p=Object(r.useState)(null),v=Object(c.a)(p,2),g=v[0],y=v[1];Object(r.useEffect)(function(){m&&h.firestore().collection("SID").doc(m).set({name:i,id:m}).then(function(){console.log("Player data stored in Firestore!")}).catch(function(e){console.error("Error storing player data: ",e)})},[m,i]),Object(r.useEffect)(function(){t&&null===g&&N(t).then(y)},[t,g]),e="?playUrl=/play/"+t+"/as/"+m;return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,g?g.name:null),m?void window.location.replace("/draw".concat(e)):a.a.createElement(T,{playerName:i,setPlayerName:l,joinGame:function(){return x({name:i,gameId:t}).then(function(e){return d(e.id)})}}))},P=n(270),G=n(271),F=n(288),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new O).get(e,t)},q=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(e){var t=this._popAttr(e,"gameId"),n=this._popAttr(e,"playerId"),r=this._popAttr(e,"questionId");return this.firestore.collection("games").doc(t).collection("answers").add(Object.assign({player:this.firestore.doc(["/games",t,"players",n].join("/")),question:this.firestore.doc(["/games",t,"questions",r].join("/"))},e)).then(function(e){return e.get()}).then(this._convertDocToAnswer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore;return"gameId"in t&&(n=n.collection("games").doc(t.gameId)),n=n.collection("answers"),"questionId"in t&&(n=n.where("question","==",this.firestore.doc("games/".concat(t.gameId,"/questions/").concat(t.questionId)))),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToAnswer(t)})})}},{key:"_convertDocToAnswer",value:function(e){return Object.assign({id:e.id},e.data())}},{key:"_popAttr",value:function(e,t){var n=e[t];return delete e[t],n}}]),n}(j);function W(e,t){var n=e[t];return delete e[t],n}var U=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.firestore,a={};return"gameId"in n&&(r=r.collection("games").doc(n.gameId).collection("questions"),a.gameId=n.gameId),r.doc(e).get().then(function(e){return t._convertDocToQuestion(e,a)})}},{key:"create",value:function(e){var t=this,n=Object.assign({},e),r=W(n,"gameId");return this.firestore.collection("games").doc(r).collection("questions").add(n).then(function(e){return e.get()}).then(function(e){return t._convertDocToQuestion(e,{gameId:r})})}},{key:"update",value:function(e,t){var n=Object.assign({},t),r=W(n,"gameId");return this.firestore.collection("games").doc(r).collection("questions").doc(e).update(n)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.firestore,r={};return"gameId"in t&&(n=n.collection("games").doc(t.gameId).collection("questions"),r.gameId=t.gameId),"from"in t&&(n=n.where("order",">",t.from)),n=n.orderBy("order"),"limit"in t&&(n=n.limit(t.limit)),n.get().then(function(t){return t.docs.map(function(t){return e._convertDocToQuestion(t,r)})})}},{key:"_convertDocToQuestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({id:e.id},e.data(),t)}}]),n}(j),R=function(e){var t=new U,n=(new Date).getTime();return(new I).get(e.gameId).then(function(e){return t.get(e.currentQuestionId,{gameId:e.id})}).then(function(t){return e.isCorrect=t.correctAnswer===e.choice,e.questionId=t.id,e.timestamp=n,console.log(e),(new q).create(e)})},Q=function(e){var t=e.recordAnswer,n=e.isAnswerDisabled;return a.a.createElement(P.a,null,["A","B","C","D"].map(function(e){return a.a.createElement(G.a,{sm:12,md:6,className:"mb-4",key:e},a.a.createElement(v.a,{className:"w-100 h-100",onClick:function(){return t(e)},disabled:n},a.a.createElement("strong",null,e)))}))},z=function(){var e=Object(u.q)(),t=e.gameId,n=e.playerId,o=Object(r.useState)(),i=Object(c.a)(o,2),l=i[0],s=i[1],h=Object(r.useState)(""),f=Object(c.a)(h,2),m=f[0],d=f[1],p=Object(r.useState)(null),v=Object(c.a)(p,2),g=v[0],y=v[1],b=Object(r.useState)(""),E=Object(c.a)(b,2),w=E[0],j=E[1],O=Object(r.useState)(!1),x=Object(c.a)(O,2),k=x[0],L=x[1],_=function(e){e&&(y(null),s(e))};Object(r.useEffect)(function(){t&&n&&(N(t,_),D(n,{gameId:t}).then(function(e){return d(e.name)}))},[t,n]);switch(l?l.state:null){case"pendingQuestion":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},"\u6e96\u5099\u56de\u7b54\u4e0b\u4e00\u984c...\u8acb\u770b\u6295\u5f71\u5594!");case"showingQuestion":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement(P.a,{className:"mb-4"},a.a.createElement(G.a,{sm:12},a.a.createElement("h2",null,"Hi ",m,"!"),a.a.createElement("h3",null,"\u770b\u6295\u5f71\u9078\u64c7\u7b54\u6848:"))),a.a.createElement(Q,{recordAnswer:function(e){k||(L(!0),R({playerId:n,playerName:m,gameId:t,choice:e}).then(function(e){y(e),setTimeout(function(){y(null),L(!1)},3e3)}).catch(function(e){j(e),setTimeout(function(){j(""),L(!1)},5e3)}))},isAnswerDisabled:k}),w?a.a.createElement(F.a,{color:"danger"},w):null,g&&k?a.a.createElement(P.a,{className:"mb-4"},a.a.createElement(G.a,{sm:12},a.a.createElement("h2",null,"\u4f60\u9078\u4e86 ",g.choice,"!"))):a.a.createElement(a.a.Fragment,null));case"showingQuestionResults":return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("div",null,"\u986f\u793a\u56de\u7b54\u7d50\u679c...\u8acb\u770b\u6295\u5f71\u5594!"));default:return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},"\u7b49\u5f85\u8ab2\u7a0b\u958b\u59cb...\u958b\u59cb\u5f8c\u8acb\u770b\u6295\u5f71\u5594!")}},Y=n(272),B=n(273),M=n(131),H=n.n(M),V=function(e){return(new I).list({shortCode:String(e),state:C.STATE_WAITING_FOR_PLAYERS})},K=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),s=Object(c.a)(i,2),h=s[0],g=s[1];return n.length>1?a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement(Y.a,null,n.map(function(e){return a.a.createElement(l.b,{key:e.id,to:"/join/".concat(e.id)},a.a.createElement(B.a,{tag:"button",action:!0},e.name))}))):1===n.length?a.a.createElement(u.a,{to:"/join/".concat(n[0].id)}):a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",{className:H.a.hero_heading},"Cahoots!"),a.a.createElement(f.a,{className:"mb-5",onSubmit:function(e){e.preventDefault(),V(h).then(o)}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"shortCode"},"\u623f\u9593\u4ee3\u78bc:"),a.a.createElement(p.a,{id:"shortCode",type:"number",value:h,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary",disabled:!h,type:"submit"},"\u52a0\u5165\u623f\u9593")),a.a.createElement(l.b,{to:"/games"},a.a.createElement(v.a,{color:"primary"},"\u5efa\u7acb\u8ab2\u7a0b")),a.a.createElement("aside",{hidden:!0},"Want to create your own quiz?\xa0",a.a.createElement(l.b,{to:"/login"},"Sign Up")))},J=n(1),X=n(187),Z=n.n(X),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new O;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:new I).update(e,{state:"waitingForPlayers"}),n.list({gameId:e},t)},ee=n(289),te=n(286);function ne(){ne=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var re=function(e){var t=e.players;return a.a.createElement(Y.a,null,t.map(function(e){return a.a.createElement(B.a,{key:e.id},e.name)}))},ae=function(e){var t=e.imageSize,n=Object(u.q)().gameId,o=Object(r.useState)(null),i=Object(c.a)(o,2),l=i[0],s=i[1],h=Object(r.useRef)(null),f=Object(r.useRef)(null),m=window.location.href,d="".concat(m,"/#/join/").concat(n);return console.log("c",m),console.log("QR",d),Object(r.useEffect)(function(){(function(){var e=Object(J.a)(ne().mark(function e(t){var n;return ne().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.a.toDataURL(t);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("QR code generation error:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}})()(d)},[]),Object(r.useEffect)(function(){if(l){var e=h.current,t=e.getContext("2d"),n=new Image;n.src=l,n.onload=function(){t.clearRect(0,0,e.width,e.height),t.drawImage(n,0,0)}}},[l]),a.a.createElement("div",{className:"qr-code-container"},a.a.createElement("canvas",{ref:h,width:t,height:t,style:{display:"none"}}),a.a.createElement("img",{ref:f,src:l,alt:"QR Code",className:"qr-code-image",style:{width:t,height:t}}))},oe=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)([]),o=Object(c.a)(n,2),i=o[0],s=o[1],h=Object(r.useState)(null),f=Object(c.a)(h,2),m=f[0],d=f[1],p="".concat(window.location.origin,"/AR-classroom/#/join-s/"),g=Object(r.useState)(!1),y=Object(c.a)(g,2),b=y[0],E=y[1];return Object(r.useEffect)(function(){t&&($(t,s),N(t).then(d))},[t]),a.a.createElement(ee.a,null,a.a.createElement(ee.a.Row,{centered:!0,columns:2},a.a.createElement(ee.a.Column,{width:8},a.a.createElement(ee.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement("h2",null,"\u52a0\u5165\u904a\u6232\u8acb\u524d\u5f80",a.a.createElement("a",{href:p,rel:"noopener noreferrer",target:"_blank"},p),a.a.createElement("br",null),"\u8f38\u5165\u623f\u9593\u4ee3\u78bc:"))),a.a.createElement(ee.a.Row,{verticalAlign:"middle"},a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement("br",null),a.a.createElement("h1",{className:H.a.hero_heading,style:{fontSize:60}},a.a.createElement("strong",null,m?m.shortCode:"___"))))),a.a.createElement(ee.a.Column,{width:3},a.a.createElement("h2",null,"\u6216\u6383\u63cf QR code\xa0",a.a.createElement(v.a,{outline:!0,color:"dark",onClick:function(){return E(!0)}},"\u653e\u5927")),a.a.createElement(te.a,{basic:!0,open:b,onClose:function(){return E(!1)}},a.a.createElement(v.a,{close:!0,color:"primary",onClick:function(){return E(!1)}}),a.a.createElement(S,null,a.a.createElement(ae,{imageSize:"700px"}))),a.a.createElement(ae,null))),a.a.createElement(ee.a.Row,{centered:!0,columns:1},a.a.createElement("h1",null,"\u7b49\u5f85\u73a9\u5bb6\u52a0\u5165...")),a.a.createElement(ee.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement(l.b,{to:"/host/".concat(t,"/questions/pending")},a.a.createElement(v.a,{color:"primary"},"\u958b\u59cb")))),a.a.createElement(ee.a.Row,null,a.a.createElement(S,{verticalCentered:!0,maxWidth:800},a.a.createElement(re,{players:i}))))},ie=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.email,r=t.password;return this.auth.createUserWithEmailAndPassword(n,r).then(function(t){var n=t.user;return e._convertUser(n)}).catch(function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)})}},{key:"login",value:function(e){var t=this,n=e.email,r=e.password;return this.auth.signInWithEmailAndPassword(n,r).then(function(e){var n=e.user;return t._convertUser(n)}).catch(function(e){var t=e.code,n=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(n)})}},{key:"onCurrentUserChange",value:function(e){var t=this;this.auth.onAuthStateChanged(function(n){n&&e(t._convertUser(n))})}},{key:"_convertUser",value:function(e){return{id:e.uid,email:e.email,name:e.displayName}}}]),n}(j),ce=function(e){var t=e.email,n=e.password;return(new ie).create({email:t,password:n})},le=function(e){var t=e.email,n=e.password;return(new ie).login({email:t,password:n})},ue=function(e,t){var n=t.email,r=t.password,a=t.authFn,o=t.successCallback;e.preventDefault(),a({email:n,password:r}).then(function(e){return o(e)})},se=function(e){var t=e.onUserChange,n=Object(r.useState)(""),o=Object(c.a)(n,2),i=o[0],l=o[1],u=Object(r.useState)(""),s=Object(c.a)(u,2),h=s[0],g=s[1];return a.a.createElement(f.a,{className:"mb-5",onSubmit:function(e){return ue(e,{email:i,password:h,authFn:ce,successCallback:t})}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"email"},"Email:"),a.a.createElement(p.a,{id:"email",name:"email",value:i,onChange:function(e){return l(e.target.value)}})),a.a.createElement(m.a,null,a.a.createElement(d.a,null,"Password:"),a.a.createElement(p.a,{type:"password",name:"password",value:h,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary"},"Sign Up"))},he=function(e){var t=e.onUserChange,n=Object(r.useState)(""),o=Object(c.a)(n,2),i=o[0],l=o[1],u=Object(r.useState)(""),s=Object(c.a)(u,2),h=s[0],g=s[1];return a.a.createElement(f.a,{className:"mb-5",onSubmit:function(e){return ue(e,{email:i,password:h,authFn:le,successCallback:t})}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"email"},"Email:"),a.a.createElement(p.a,{id:"email",name:"email",value:i,onChange:function(e){return l(e.target.value)}})),a.a.createElement(m.a,null,a.a.createElement(d.a,null,"Password:"),a.a.createElement(p.a,{type:"password",name:"password",value:h,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary"},"Login"))},fe=function(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),o=n[0],i=n[1],l=Object(r.useState)(null),s=Object(c.a)(l,2),h=s[0],f=s[1],m=function(e){e.preventDefault(),i(!o)};return h?a.a.createElement(u.a,{to:"/games"}):o?a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,"Login to Cahoots!"),a.a.createElement(he,{onUserChange:f}),a.a.createElement("div",null,"No account? ",a.a.createElement("br",null),a.a.createElement(v.a,{color:"link",onClick:m},"Sign Up!"))):a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",null,"Signup for Cahoots!"),a.a.createElement(se,{onUserChange:f}),a.a.createElement("div",null,"Have an account? ",a.a.createElement("br",null),a.a.createElement(v.a,{color:"link",onClick:m},"Login")))},me=function(){var e=new ie;return new Promise(function(t){return e.onCurrentUserChange(t)})},de=function(){var e=new I;return me().then(function(t){return t?e.list({ownerId:t.id}):null})},pe=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(null),l=Object(c.a)(i,2),s=l[0],h=l[1];return Object(r.useEffect)(function(){de().then(o)},[]),s?a.a.createElement(u.a,{to:s}):a.a.createElement(k.a,{style:{maxWidth:"500px"}},a.a.createElement("h1",null,"\u6211\u7684\u8ab2\u7a0b"),a.a.createElement(Y.a,null,n.map(function(e){return a.a.createElement(B.a,{key:e.id,onClick:function(){return h("/games/".concat(e.id))},tag:"button",action:!0},e.name)}),a.a.createElement(B.a,{onClick:function(){return h("/games/create")},tag:"button",color:"info",action:!0},"\u5275\u5efa\u65b0\u8ab2\u7a0b")))},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new I,n=String(Math.floor(Math.random()*Math.floor(9999)));return t.create(Object.assign({shortCode:n},e))},ge=function(e){var t=Object(r.useState)(null),n=Object(c.a)(t,2),o=n[0],i=n[1],l=Object(r.useState)(""),s=Object(c.a)(l,2),h=s[0],f=s[1],g=Object(r.useState)(null),y=Object(c.a)(g,2),b=y[0],E=y[1];return Object(r.useEffect)(function(){me().then(i)},[]),b?a.a.createElement(u.a,{to:"/games"}):a.a.createElement(k.a,{style:{maxWidth:"500px"}},a.a.createElement("h1",null,"\u5275\u5efa\u60a8\u7684\u8ab2\u7a0b"),a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"name"},"\u8ab2\u7a0b\u540d\u7a31:"),a.a.createElement(p.a,{id:"name",name:"name",value:h,onChange:function(e){return f(e.target.value)}})),a.a.createElement(v.a,{color:"primary",onClick:function(){return e={name:h,ownerId:o.id},t=E,ve(e).then(t);var e,t}},"\u78ba\u8a8d"))},ye=function(e){return(new U).list(e)},be=n(4),Ee=n(274),we=n(275),je=n(276),Oe=n(277),xe=n(190),ke=n(278),Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new U,n=Object.assign({},e);if("id"in n){var r=W(n,"id");return t.update(r,n)}return t.create(n)},_e=n(90);function Se(){Se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Ce=window.location.href,Ie=new URL(Ce).pathname.split("/"),Ne=Ie[Ie.length-1];console.log("gameId:",Ne);var Te=function(){var e=Object(J.a)(Se().mark(function e(t){var n;return Se().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.firestore(),e.prev=1,e.next=4,Object(_e.a)(Object(_e.b)(n,"games",Ne,"questions",t));case 4:window.location.reload(),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error("Error deleting question: "+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}();function Ae(){Ae=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Pe=function(e){var t=e.question,n=Object(r.useState)(t),o=Object(c.a)(n,2),i=o[0],l=o[1],u=Object(r.useState)("default"),s=Object(c.a)(u,2),h=s[0],f=s[1],g=function(e){l(Object.assign({},i,e))},y=function(){var e=Object(J.a)(Ae().mark(function e(){return Ae().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f("saving"),e.prev=1,e.next=4,Te(i.id);case 4:f("default"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error deleting question",e.t0),f("default");case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(Ee.a,{body:!0,className:"mt-4 mb-4"},a.a.createElement(we.a,null,a.a.createElement(je.a,{className:"mb-2"},a.a.createElement(p.a,{type:"textarea",placeholder:"\u8acb\u8f38\u5165\u5b8c\u6574\u984c\u76ee",value:i.text||"",onChange:function(e){return g({text:e.target.value})}}))),["answerA","answerB","answerC","answerD"].map(function(e){return a.a.createElement(je.a,{key:e,className:"mb-2"},a.a.createElement(Oe.a,{addonType:"prepend"},a.a.createElement(xe.a,null,e)),a.a.createElement(p.a,{placeholder:"\u8acb\u8f38\u5165\u9078\u9805",value:e in i?i[e]:"",onChange:function(t){return g(Object(be.a)({},e,t.target.value))}}))}),a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"correctAnswerDropdown"},"\u6b63\u78ba\u7b54\u6848"),a.a.createElement(p.a,{type:"select",name:"correctAnswer",id:"correctAnswerDropdown","data-testid":"correctAnswerDropdown",value:i.correctAnswer||"\u9078\u64c7\u6b63\u78ba\u7b54\u6848",onChange:function(e){return g({correctAnswer:e.target.value})}},a.a.createElement("option",null,"A"),a.a.createElement("option",null,"B"),a.a.createElement("option",null,"C"),a.a.createElement("option",null,"D"),a.a.createElement("option",{hidden:!0},"\u9078\u64c7\u6b63\u78ba\u7b54\u6848"))),"saving"===h?a.a.createElement(v.a,{disabled:!0,color:"primary",className:"mt-4"},a.a.createElement(ke.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"\u4fdd\u5b58\u4e2d..."):a.a.createElement(v.a,{color:"primary",className:"mt-4",onClick:function(){f("saving"),Le(i).then(function(){return f("default")})}},"\u4fdd\u5b58"),a.a.createElement(v.a,{color:"danger",className:"mt-4",onClick:y,disabled:"saving"===h},"saving"===h?a.a.createElement(a.a.Fragment,null,a.a.createElement(ke.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"\u522a\u9664\u4e2d..."):"\u522a\u9664\u984c\u76ee")))};function Ge(){Ge=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var Fe=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)(null),o=Object(c.a)(n,2),i=o[0],s=o[1],f=Object(r.useState)([]),m=Object(c.a)(f,2),d=m[0],p=m[1],g=Object(u.o)(),y=function(){var e=Object(J.a)(Ge().mark(function e(){var n;return Ge().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!i){e.next=11;break}return e.prev=1,n=h.firestore(),e.next=5,Object(_e.a)(Object(_e.b)(n,"games",t));case 5:g("/games"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("\u522a\u9664\u904a\u6232\u6642\u767c\u751f\u932f\u8aa4",e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){t&&null===i&&N(t).then(function(e){return s(e),e}).then(function(e){return ye({gameId:e.id})}).then(p)},[t,i]),i?a.a.createElement(S,{maxWidth:500},a.a.createElement("h1",{className:"mb-4"},i.name),a.a.createElement(k.a,null,d.length>0?a.a.createElement(l.b,{to:"/lobby/".concat(t)},a.a.createElement(v.a,{color:"success",size:"lg"},"\u958b\u59cb\u8ab2\u7a0b")):null),d.map(function(e){return a.a.createElement(Pe,{key:e.id,question:e})}),a.a.createElement(k.a,null,a.a.createElement(v.a,{onClick:function(){Le({gameId:t,order:d.length+1}).then(function(e){return p(d.concat([e]))})}},"\u65b0\u589e\u984c\u76ee"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(v.a,{style:{marginBottom:20},onClick:y,color:"danger"},"\u522a\u9664\u904a\u6232"))):a.a.createElement(S,{maxWidth:500},"Loading...")},De=function(e){var t=new URLSearchParams(Object(u.m)().search).get("game");return a.a.createElement(S,{maxWidth:500,verticalCentered:!0},t)};function qe(){qe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var We=function(){var e=Object(J.a)(qe().mark(function e(t){var n,r,a,o,i,c,l=arguments;return qe().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:0,r=new I,a=new U,e.prev=3,e.next=6,r.get(t);case 6:o=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(!o){e.next=33;break}if(r.update(t,{state:"pendingQuestion"}),!("currentQuestion"in o)){e.next=17;break}return e.abrupt("return",a.get(o.currentQuestion));case 17:return e.next=19,a.list({gameId:t,from:n,limit:1});case 19:if(i=e.sent,!(c=i[0])){e.next=25;break}r.update(t,{currentQuestionId:c.id,currentQuestionIndex:n+1}),e.next=30;break;case 25:return r.update(t,{currentQuestionIndex:0}),n=0,e.next=29,We(t,n);case 29:c=e.sent;case 30:return e.abrupt("return",c);case 31:e.next=34;break;case 33:return e.abrupt("return");case 34:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}(),Ue=We,Re=function e(t){var n=t.endDate,r=t.intervalCallback,a=t.endedCallback;setTimeout(function(){var t=function(e){var t=(e-Date.now())/1e3;return t>0?t:0}(n);t>0?(r(t),e({endDate:n,intervalCallback:r,endedCallback:a})):a(t)},1e3)},Qe=function(e){var t=e.seconds,n=e.intervalCallback,r=e.endedCallback,a=new Date(Date.now()+1e3*t);Re({endDate:a,intervalCallback:n,endedCallback:r})},ze=function(e){e.parentUrl;var t=Object(u.q)().gameId,n=Object(r.useState)(5),o=Object(c.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(null),h=Object(c.a)(s,2),f=h[0],m=h[1];console.log(t),Object(r.useEffect)(function(){t&&(Qe({seconds:5,intervalCallback:l,endedCallback:l}),Ue(t).then(m),console.log("snq",Ue))},[t]);var d="/host/"+t;return console.log("n:",f),a.a.createElement(S,{verticalCentered:!0},a.a.createElement("div",{className:"mb-4"},"Next question in..."),a.a.createElement("div",{className:"display-1"},Math.ceil(i)),i<=0&&f?a.a.createElement(u.a,{to:"".concat(d,"/questions/current")}):null)},Ye=n(279),Be=n(280),Me=function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new U).get(e,t)},He=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new I,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new q;return n.update(e,{state:"showingQuestionResults"}),r.list({gameId:e,questionId:t}).then(function(e){var t={A:[],B:[],C:[],D:[]};return e.forEach(function(e){t[e.choice]=t[e.choice].concat(e.playerName)}),t})},Ve=function(e){return(new U).list({gameId:e}).then(function(e){return e.length})},Ke=function(e,t){return e.correctAnswer===t},Je=function(e){var t=e.result,n=e.className,r=e.question;return a.a.createElement("div",{className:n},a.a.createElement("h2",{className:"mb-4"},r?r.text:null),a.a.createElement(P.a,null,Object.entries(t).map(function(e){var t=Object(c.a)(e,2),n=t[0],o=t[1];return a.a.createElement(G.a,{sm:12,md:6,className:"mb-4"},a.a.createElement(Ee.a,{color:Ke(r,n)?"success":null,inverse:!!Ke(r,n)||null},a.a.createElement(Ye.a,null,a.a.createElement(we.a,null,a.a.createElement("strong",{className:"mr-2"},n),Ke(r,n)?"\u2714\ufe0f":"\u274c"),a.a.createElement(Be.a,null,o.join(", ")))))})))},Xe=function(e){e.parentUrl;var t=Object(u.q)(),n=t.gameId,o=t.questionId,i=Object(r.useState)({}),s=Object(c.a)(i,2),h=s[0],f=s[1],m=Object(r.useState)(null),d=Object(c.a)(m,2),p=d[0],g=d[1],y=Object(r.useState)(null),b=Object(c.a)(y,2),E=b[0],w=b[1];Object(r.useEffect)(function(){n&&o&&(Me(o,{gameId:n}).then(g),Ve(n).then(w),He(n,o).then(f))},[n,o]);var j="/host/"+n;return a.a.createElement(S,{verticalCentered:!0},a.a.createElement(Je,{className:"mb-4",result:h,question:p}),a.a.createElement(k.a,null,p&&p.order>=E?a.a.createElement(l.b,{to:"".concat(j,"/results/final")},a.a.createElement(v.a,{color:"primary"},"\u986f\u793a\u8ab2\u7a0b\u6700\u7d42\u7d50\u679c")):a.a.createElement(l.b,{to:"".concat(j,"/questions/pending")},a.a.createElement(v.a,{color:"primary"},"\u4e0b\u4e00\u984c"))))},Ze=n(281),$e=new I,et=function(e){var t=new q;return $e.update(e,{state:"draft"}),t.list({gameId:e}).then(function(e){return e.filter(function(e){return"isCorrect"in e&&!!e.isCorrect}).reduce(function(e,t){return t.playerName in e?e[t.playerName]+=1:e[t.playerName]=1,e},{})})},tt=function(e,t){var n=Object(c.a)(e,2)[1],r=Object(c.a)(t,2)[1];return n>r?-1:n<r?1:0},nt=function(e){var t=e.results,n=Object.entries(t);return n.sort(tt),a.a.createElement(Y.a,null,n.slice(0,5).map(function(e,t){var n=Object(c.a)(e,2),r=n[0],o=n[1];return t<=2?a.a.createElement(B.a,{key:r,className:"d-flex justify-content-between"},r,a.a.createElement(Ze.a,{className:"ml-4 p-2",color:"success"},o)):a.a.createElement(B.a,{key:r,className:"d-flex justify-content-between"},r,a.a.createElement(Ze.a,{className:"ml-4 p-2"},o))}))},rt=function(e){var t=Object(u.q)().gameId,n=Object(r.useState)({}),o=Object(c.a)(n,2),i=o[0],s=o[1];return Object(r.useEffect)(function(){t&&et(t).then(s)},[t]),a.a.createElement(S,{verticalCentered:!0,maxWidth:500},a.a.createElement("h1",null,"\u8ab2\u7a0b\u7d50\u679c"),a.a.createElement(nt,{results:i}),a.a.createElement("br",null),a.a.createElement(k.a,null,a.a.createElement(l.b,{to:"/games"},a.a.createElement(v.a,{color:"primary"},"\u56de\u984c\u76ee\u5217\u8868"))),a.a.createElement("br",null),a.a.createElement(k.a,null,a.a.createElement(l.b,{to:"/"},a.a.createElement(v.a,{color:"primary"},"\u56de\u9996\u9801"))))},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new I,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new U;return t.update(e,{state:"showingQuestion"}),t.get(e).then(function(e){return n.get(e.currentQuestion)})},ot=function(e){var t=e.question,n=e.className;return a.a.createElement("div",{className:n},a.a.createElement("h2",{className:"mb-4"},t.text),a.a.createElement(P.a,null,["A","B","C","D"].map(function(e){return a.a.createElement(G.a,{key:e,sm:12,md:6,className:"mb-4"},a.a.createElement(Ee.a,null,a.a.createElement(Ye.a,null,a.a.createElement(we.a,null,a.a.createElement("strong",null,e)),a.a.createElement(Be.a,null,t["answer".concat(e)]))))})))},it=function(e){var t=e.isVisible,n=e.linkTo;return t?a.a.createElement(l.b,{to:n},a.a.createElement(v.a,{color:"primary"},"\u986f\u793a\u56de\u7b54\u7d50\u679c")):null},ct=function(e){e.parentUrl;var t=Object(u.q)().gameId,n=Object(r.useState)(null),o=Object(c.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(2),h=Object(c.a)(s,2),f=h[0],m=h[1];return Object(r.useEffect)(function(){t&&(Qe({seconds:2,intervalCallback:m,endedCallback:m}),at(t).then(l))},[t]),a.a.createElement(S,{verticalCentered:!0},i?a.a.createElement("div",null,a.a.createElement(ot,{question:i}),a.a.createElement("div",{className:"mt-4"},"\u5269\u9918\u6642\u9593:"),a.a.createElement("div",{className:"display-1"},Math.ceil(f)),a.a.createElement(it,{isVisible:f<=0,linkTo:"http://localhost:5173/index.html?GID=".concat(t,"&QID=").concat(i.id)})):a.a.createElement("div",null,"\u8acb\u7a0d\u7b49..."))},lt=n(285);var ut=function(){var e=a.a.useState(null),t=Object(c.a)(e,2),n=t[0],r=t[1];return a.a.useEffect(function(){h.auth().onAuthStateChanged(function(e){r(e)})},[]),a.a.createElement(lt.a,{size:"large"},a.a.createElement(lt.a.Item,{as:l.b,to:"/"},"AR Classroom"),a.a.createElement(lt.a.Menu,{position:"right"},n?a.a.createElement(a.a.Fragment,null,a.a.createElement(lt.a.Item,{as:l.b,to:"/games"},"\u6211\u7684\u8ab2\u7a0b"),a.a.createElement(lt.a.Item,{as:l.b,to:"/join-s"},"\u5b78\u751f\u9023\u7d50"),a.a.createElement(lt.a.Item,{as:l.b,to:"/results"},"\u7d50\u679c\u5831\u8868"),a.a.createElement(lt.a.Item,{as:l.b,to:"/settings"},"\u8a2d\u5b9a"),a.a.createElement(lt.a.Item,{onClick:function(){return h.auth().signOut()}},"\u767b\u51fa")):a.a.createElement(lt.a.Item,{as:l.b,to:"/signin"},"\u8a3b\u518a/\u767b\u5165")))},st=n(282),ht=n(284),ft=n(287);n(252);var mt=function(){var e=a.a.useState("register"),t=Object(c.a)(e,2),n=t[0],r=t[1],o=a.a.useState(""),i=Object(c.a)(o,2),l=i[0],s=i[1],f=a.a.useState(""),m=Object(c.a)(f,2),d=m[0],p=m[1],v=Object(u.o)(),g=a.a.useState(""),y=Object(c.a)(g,2),b=y[0],E=y[1],w=a.a.useState(!1),j=Object(c.a)(w,2),O=j[0],x=j[1];return a.a.createElement(st.a,null,a.a.createElement(lt.a,{widths:"2"},a.a.createElement(lt.a.Item,{active:"register"===n,onClick:function(){E(""),r("register")}},"\u8a3b\u518a"),a.a.createElement(lt.a.Item,{active:"signin"===n,onClick:function(){E(""),r("signin")}},"\u767b\u5165")),a.a.createElement(ht.a,{onSubmit:function(){x(!0),"register"===n?h.auth().createUserWithEmailAndPassword(l,d).then(function(){v("/"),x(!1)}).catch(function(e){switch(e.code){case"auth/email-already-in-use":E("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":E("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":E("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}}):"signin"===n&&h.auth().signInWithEmailAndPassword(l,d).then(function(){v("/"),x(!1)}).catch(function(e){var t=e.code;switch(console.log(t),t){case"auth/invalid-email":E("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/internal-error":E("\u6b64\u4fe1\u7bb1\u5c1a\u672a\u8a3b\u518a \u6216 \u5bc6\u78bc\u932f\u8aa4"),x(!1)}})}},a.a.createElement(ht.a.Input,{label:"\u4fe1\u7bb1",value:l,onChange:function(e){return s(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),a.a.createElement(ht.a.Input,{label:"\u5bc6\u78bc",value:d,onChange:function(e){return p(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password"}),b&&a.a.createElement(ft.a,{negative:!0},b),a.a.createElement(ht.a.Button,{loading:O},"register"===n&&"\u8a3b\u518a","signin"===n&&"\u767b\u5165")))},dt=n(291),pt=n(193),vt=n(254),gt=n(124);var yt=function(){var e=a.a.useState(""),t=Object(c.a)(e,2),n=t[0],r=t[1],o=a.a.useState(""),i=Object(c.a)(o,2),l=i[0],s=i[1],f=a.a.useState([]),m=Object(c.a)(f,2),d=m[0],p=m[1],v=a.a.useState(""),g=Object(c.a)(v,2),y=g[0],b=g[1],E=a.a.useState(null),w=Object(c.a)(E,2),j=w[0],O=w[1],x=Object(u.o)(),k=a.a.useState(!1),L=Object(c.a)(k,2),_=L[0],S=L[1];a.a.useEffect(function(){h.firestore().collection("topics").get().then(function(e){var t=e.docs.map(function(e){return e.data()});p(t)})},[]);var C=d.map(function(e){return{text:e.name,value:e.name}}),I=j?URL.createObjectURL(j):"https://react.semantic-ui.com/images/wireframe/image.png";return a.a.createElement(st.a,null,a.a.createElement(dt.a,null,"\u767c\u8868\u6587\u7ae0"),a.a.createElement(ht.a,{onSubmit:function(){S(!0);var e=h.firestore().collection("posts").doc(),t=h.storage().ref("post-images/"+e.id),r={contentType:j.type};t.put(j,r).then(function(){t.getDownloadURL().then(function(t){e.set({title:n,content:l,topic:y,createdAt:h.firestore.Timestamp.now(),author:{displayName:h.auth().currentUser.displayName||"",photoURL:h.auth().currentUser.photoURL||"",uid:h.auth().currentUser.uid,email:h.auth().currentUser.email},imageUrl:t}).then(function(){S(!1),x("/")})})})}},a.a.createElement(pt.a,{src:I,size:"small",floated:"left"}),a.a.createElement(vt.a,{basic:!0,as:"label",htmlFor:"post-image"},"\u4e0a\u50b3\u6587\u7ae0\u5716\u7247"),a.a.createElement(ht.a.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:function(e){return O(e.target.files[0])}}),a.a.createElement(ht.a.Input,{placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:n,onChange:function(e){return r(e.target.value)}}),a.a.createElement(ht.a.TextArea,{placeholder:"\u8f38\u5165\u6587\u7ae0\u5167\u5bb9",value:l,onChange:function(e){return s(e.target.value)}}),a.a.createElement(ht.a.Dropdown,{placeholder:"\u9078\u64c7\u6587\u7ae0\u4e3b\u984c",options:C,selection:!0,value:y,onChange:function(e,t){var n=t.value;return b(n)}}),a.a.createElement(ht.a.Button,{loading:_},"\u9001\u51fa")))},bt=n(113),Et=n(191);function wt(){wt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function b(){}var E={};u(E,i,function(){return this});var w=Object.getPrototypeOf,j=w&&w(w(N([])));j&&j!==n&&r.call(j,i)&&(E=j);var O=b.prototype=g.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){function n(a,o,i,c){var l=h(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?t.resolve(s.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(s).then(function(e){u.value=e,i(u)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=f;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},x(k.prototype),u(k.prototype,c,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new k(s(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(O),u(O,l,"Generator"),u(O,i,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var jt=Object(gt.a)(),Ot=window.location.search.substring(1).split("=")[1],xt=window.location.href.lastIndexOf("/")+1,kt=window.location.href.substring(xt);console.log("playUrl: "+Ot);var Lt=Object(gt.b)(jt,"svgs/".concat(kt+".svg"," "));function _t(e){var t=e.fieldName,n=e.type,r=void 0===n?"text":n,o=e.canvasProps,i=e.setCanvasProps,c=e.displayName,l="validation".concat(t);return a.a.createElement("div",{className:"p-2 col-10"},a.a.createElement("label",{htmlFor:l,className:"form-label"},c),a.a.createElement("input",{name:t,type:r,className:"form-control",id:l,value:o[t],onChange:function(e){var n=e.target;i(function(e){return Object(bt.a)(Object(bt.a)({},e),{},Object(be.a)({},t,n.value))})},min:1,max:30}))}var St=function(){var e=a.a.useState({className:"react-sketch-canvas",width:"100%",height:"450PX",backgroundImage:"https://upload.wikimedia.org/wikipedia/commons/7/70/Graph_paper_scan_1600x1000_%286509259561%29.jpg",preserveBackgroundImageAspectRatio:"none",strokeWidth:4,eraserWidth:5,strokeColor:"#000000",canvasColor:"#FFFFFF",style:{borderRight:"1px solid #CCC"},svgStyle:{},exportWithBackgroundImage:!1,withTimestamp:!0,allowOnlyPointerType:"all",withViewBox:!1}),t=Object(c.a)(e,2),n=t[0],o=t[1],i=a.a.createRef(),l=a.a.useState("info"),u=Object(c.a)(l,2),s=u[0],h=u[1],f=a.a.useState("secondary"),m=Object(c.a)(f,2),d=m[0],p=m[1],v=a.a.useState(""),g=Object(c.a)(v,2),y=(g[0],g[1],a.a.useState("")),b=Object(c.a)(y,2),E=(b[0],b[1]),w=a.a.useState([]),j=Object(c.a)(w,2),O=(j[0],j[1]),x=a.a.useState({stroke:null,isEraser:null}),k=Object(c.a)(x,2),L=(k[0],k[1]),_=a.a.useState("png"),S=Object(c.a)(_,2),C=(S[0],S[1],Object(r.useState)(!1)),I=Object(c.a)(C,2),N=I[0],T=I[1],A=[["\u5fa9\u539f",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.undo;t&&t()},"dark"],["\u53d6\u6d88\u5fa9\u539f",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.redo;t&&t()},"dark"],["\u6e05\u9664\u5168\u90e8",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.clearCanvas;t&&t()},"dark"],["\u91cd\u7f6e",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.resetCanvas;t&&t()},"dark"],["\u756b\u7b46",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.eraseMode;t&&(h("primary"),p("secondary"),t(!1))},s],["\u6a61\u76ae\u64e6",function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.eraseMode;t&&(h("secondary"),p("primary"),t(!0))},d],["\u5b8c\u6210",function(){var e=Object(J.a)(wt().mark(function e(){var t,n,r,a;return wt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===(t=i.current)||void 0===t?void 0:t.exportSvg)){e.next=11;break}return e.next=4,n();case 4:r=e.sent,E(r),T(!0),console.log(r),r=r.replace('<rect id="react-sketch-canvas__mask-background" x="0" y="0" width="100%" height="100%" fill="white"></rect></g><defs></defs><g id="react-sketch-canvas__canvas-background-group"><rect id="react-sketch-canvas__canvas-background" x="0" y="0" width="100%" height="100%" fill="#FFFFFF"></rect>',""),a=new Blob([r],{type:"image/svg+xml"}),Object(gt.c)(Lt,a).then(function(e){console.log("SVG upload to Firebase succeed")}).catch(function(e){console.error("SVG upload to Firebase failed",e)});case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),"success"],["\u4e0b\u4e00\u6b65",function(){N?window.location.href=Ot:alert("\u8acb\u5148\u756b\u5716\u4e26\u6309\u5b8c\u6210")},"success"]];return a.a.createElement("main",{className:"container-fluid p-2"},a.a.createElement("div",{className:"row"},a.a.createElement("section",{className:"col-12"},a.a.createElement("header",{className:"my-5"},a.a.createElement("h1",null,"\u756b\u51fa\u4f60\u7684\u865b\u64ec\u66ff\u8eab")),a.a.createElement("section",{className:"row no-gutters canvas-area m-0 p-0"},a.a.createElement("div",{className:"col-9 canvas p-0"},a.a.createElement(Et.a,Object.assign({ref:i,onChange:function(e){O(e)},onStroke:function(e,t){return L({stroke:e,isEraser:t})}},n))),a.a.createElement("div",{className:"col-3 panel"},a.a.createElement("div",{className:"d-grid gap-2"},A.map(function(e){var t=Object(c.a)(e,3);return function(e,t,n){return a.a.createElement("button",{key:e,className:"btn btn-".concat(n," btn-block"),type:"button",onClick:t},e)}(t[0],t[1],t[2])})))),a.a.createElement("form",null,[["strokeWidth","range","\u756b\u7b46\u7c97\u7d30"],["eraserWidth","range","\u6a61\u76ae\u64e6\u7c97\u7d30"]].map(function(e){var t=Object(c.a)(e,3),r=t[0],i=t[1],l=t[2];return a.a.createElement(_t,{key:r,fieldName:r,displayName:l,type:i,canvasProps:n,setCanvasProps:o})})))))},Ct=n(292),It=n(283);var Nt=function(e){var t=e.user,n=a.a.useState(!1),r=Object(c.a)(n,2),o=r[0],i=r[1],l=a.a.useState(!1),u=Object(c.a)(l,2),s=u[0],f=u[1],m=a.a.useState(""),d=Object(c.a)(m,2),p=d[0],v=d[1],g=a.a.useState(!1),y=Object(c.a)(g,2),b=y[0],E=y[1],w=a.a.useState(""),j=Object(c.a)(w,2),O=j[0],x=j[1],k=a.a.useState(""),L=Object(c.a)(k,2),_=L[0],S=L[1];return a.a.createElement(st.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(dt.a,null,"\u6211\u7684\u6a94\u6848"),a.a.createElement(dt.a,{size:"small"},"\u4f7f\u7528\u8005\u540d\u7a31",a.a.createElement(vt.a,{floated:"right",onClick:function(){return i(!0)}},"\u4fee\u6539")),a.a.createElement(Ct.a,{vertical:!0},t.displayName),a.a.createElement(te.a,{open:o,size:"mini"},a.a.createElement(te.a.Header,null,"\u4fee\u6539\u4f7f\u7528\u8005\u540d\u7a31"),a.a.createElement(te.a.Content,null,a.a.createElement(It.a,{placeholder:"\u8f38\u5165\u65b0\u7684\u4f7f\u7528\u8005\u540d\u7a31",value:p,onChange:function(e){return v(e.target.value)},fluid:!0})),a.a.createElement(te.a.Actions,null,a.a.createElement(vt.a,{onClick:function(){return i(!1)}},"\u53d6\u6d88"),a.a.createElement(vt.a,{onClick:function(){E(!0),t.updateProfile({displayName:p}).then(function(){v(""),i(!1),E(!1)})},loading:b},"\u4fee\u6539")))),a.a.createElement(a.a.Fragment,null,a.a.createElement(dt.a,{size:"small"},"\u4fee\u6539\u5bc6\u78bc",a.a.createElement(vt.a,{floated:"right",onClick:function(){return f(!0)}},"\u4fee\u6539")),a.a.createElement(Ct.a,{vertical:!0},"********"),a.a.createElement(te.a,{size:"mini",open:s},a.a.createElement(te.a.Header,null,"\u4fee\u6539\u4f7f\u7528\u8005\u5bc6\u78bc"),a.a.createElement(te.a.Content,null,a.a.createElement(dt.a,{size:"small"},"\u76ee\u524d\u5bc6\u78bc"),a.a.createElement(It.a,{placeholder:"\u8f38\u5165\u820a\u5bc6\u78bc",value:O,onChange:function(e){return x(e.target.value)},fluid:!0}),a.a.createElement(dt.a,{size:"small"},"\u65b0\u5bc6\u78bc"),a.a.createElement(It.a,{placeholder:"\u8f38\u5165\u65b0\u5bc6\u78bc",value:_,onChange:function(e){return S(e.target.value)},fluid:!0})),a.a.createElement(te.a.Actions,null,a.a.createElement(vt.a,{onClick:function(){return f(!1)}},"\u53d6\u6d88"),a.a.createElement(vt.a,{onClick:function(){E(!0);var e=h.auth.EmailAuthProvider.credential(t.email,O);t.reauthenticateWithCredential(e).then(function(){t.updatePassword(_).then(function(){f(!1),x(""),S(""),E(!1)})})},loading:b},"\u4fee\u6539")))))};var Tt=function(){return"\u7d50\u679c\u5831\u8868"},At=n(121),Pt=n.n(At),Gt=n(192),Ft=n.n(Gt);function Dt(e){var t=e.src;return a.a.createElement("div",{className:Ft.a.videobox},a.a.createElement("iframe",{frameBorder:"0",src:t,allowFullScreen:"true",title:"\u5be6\u969b\u64cd\u4f5c\u5f71\u7247"}))}var qt=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],o=t[1];return a.a.useEffect(function(){h.auth().onAuthStateChanged(function(e){o(e)})}),a.a.createElement(st.a,{style:{width:"100%",height:"100vh"}},a.a.createElement(ee.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement("div",{className:Pt.a.hero_heading,style:{fontWeight:"bold"}},"AR")),a.a.createElement(ee.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement("div",{className:Pt.a.hero_heading,style:{fontWeight:"bold"}},"Classroom")),a.a.createElement(ee.a,{centered:!0,style:{marginTop:"40px"}},n?a.a.createElement(a.a.Fragment,null):a.a.createElement(vt.a,{color:"positive",size:"large",as:l.b,to:"/signin"},"\u7acb\u5373\u8a3b\u518a/\u767b\u5165")),a.a.createElement(ee.a,{centered:!0,style:{marginTop:"40px"}},a.a.createElement(ee.a.Column,{width:12},a.a.createElement(Dt,{src:"https://youtube.com/embed/LY_b0lxHX7o?feature=share;",controls:!0,width:"100%"}))))};var Wt=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),s=Object(c.a)(i,2),h=s[0],g=s[1];return n.length>1?a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement(Y.a,null,n.map(function(e){return a.a.createElement(l.b,{key:e.id,to:"/join/".concat(e.id)},a.a.createElement(B.a,{tag:"button",action:!0},e.name))}))):1===n.length?a.a.createElement(u.a,{to:"/join/".concat(n[0].id)}):a.a.createElement(S,{maxWidth:500,verticalCentered:!0},a.a.createElement("h1",{className:Pt.a.hero_heading},"AR Classroom !"),a.a.createElement(f.a,{className:"mb-5",onSubmit:function(e){e.preventDefault(),V(h).then(o)}},a.a.createElement(m.a,null,a.a.createElement(d.a,{for:"shortCode"},"\u623f\u9593\u4ee3\u78bc:"),a.a.createElement(p.a,{id:"shortCode",type:"number",value:h,onChange:function(e){return g(e.target.value)}})),a.a.createElement(v.a,{color:"primary",disabled:!h,type:"submit"},"\u52a0\u5165\u623f\u9593")),a.a.createElement("aside",{hidden:!0},"Want to create your own quiz?\xa0",a.a.createElement(l.b,{to:"/login"},"Sign Up")))};var Ut=function(){var e=a.a.useState(null),t=Object(c.a)(e,2),n=t[0],r=t[1];return a.a.useEffect(function(){h.auth().onAuthStateChanged(function(e){r(e)})}),a.a.createElement(l.a,null,a.a.createElement(ut,null),a.a.createElement("div",{className:"App"},a.a.createElement(u.d,null,a.a.createElement(u.b,{path:"/login",element:a.a.createElement(fe,null),key:fe.id}),a.a.createElement(u.b,{path:"/",exact:!0,element:a.a.createElement(qt,null),key:qt.id}),a.a.createElement(u.b,{path:"/signin",exact:!0,element:a.a.createElement(mt,null),key:mt.id}),a.a.createElement(u.b,{path:"/join-s",exact:!0,element:a.a.createElement(Wt,null)}),a.a.createElement(u.b,{path:"/lobby/:gameId",element:a.a.createElement(oe,null),key:oe.id}),a.a.createElement(u.b,{path:"/play/:gameId/as/:playerId",element:a.a.createElement(z,null),key:z.id}),a.a.createElement(u.b,{path:"/join/:gameId",element:a.a.createElement(A,null),key:A.id}),a.a.createElement(u.b,{path:"/join",element:a.a.createElement(De,null),key:De.id}),a.a.createElement(u.b,{path:"/games/create",element:a.a.createElement(ge,null),key:ge.id}),a.a.createElement(u.b,{path:"/games/:gameId",element:a.a.createElement(Fe,null),key:Fe.id}),a.a.createElement(u.b,{path:"/games",exact:!0,element:a.a.createElement(pe,null),key:pe.id}),a.a.createElement(u.b,{path:"/cahoots",element:a.a.createElement(K,null),key:K.id}),a.a.createElement(u.b,{path:"/new-post",exact:!0,element:a.a.createElement(yt,null),key:yt.id}),a.a.createElement(u.b,{path:"/draw",exact:!0,element:a.a.createElement(St,null),key:St.id}),a.a.createElement(u.b,{path:"/settings",exact:!0,element:a.a.createElement(Nt,{user:n}),key:Nt.id}),a.a.createElement(u.b,{path:"/results",exact:!0,element:a.a.createElement(Tt,null),key:Tt.id}),a.a.createElement(u.b,{path:"/host/:gameId/questions/pending",element:a.a.createElement(ze,null),key:ze.id}),a.a.createElement(u.b,{path:"/host/:gameId/questions/current",element:a.a.createElement(ct,null),key:ct.id}),a.a.createElement(u.b,{path:"/host/:gameId/results/final",element:a.a.createElement(rt,null),key:rt.id}),a.a.createElement(u.b,{path:"/host/:gameId/results/:questionId",element:a.a.createElement(Xe,null),key:Xe.id}))))};n(250);i.a.render(a.a.createElement(Ut,null),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.0728f6d4.chunk.js.map